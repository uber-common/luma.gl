(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var util=require("util/");var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},{"util/":194}],2:[function(require,module,exports){(function(global){"use strict";require("core-js/shim");require("babel-regenerator-runtime");if(global._babelPolyfill){throw new Error("only one instance of babel-polyfill is allowed")}global._babelPolyfill=true}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"babel-regenerator-runtime":3,"core-js/shim":191}],3:[function(require,module,exports){(function(process,global){!function(global){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var undefined;var iteratorSymbol=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var generator=Object.create((outerFn||Generator).prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype}genFun.prototype=Object.create(Gp);return genFun};runtime.awrap=function(arg){return new AwaitArgument(arg)};function AwaitArgument(arg){this.arg=arg}function AsyncIterator(generator){function invoke(method,arg){var result=generator[method](arg);var value=result.value;return value instanceof AwaitArgument?Promise.resolve(value.arg).then(invokeNext,invokeThrow):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;return result})}if(typeof process==="object"&&process.domain){invoke=process.domain.bind(invoke)}var invokeNext=invoke.bind(generator,"next");var invokeThrow=invoke.bind(generator,"throw");var invokeReturn=invoke.bind(generator,"return");var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return invoke(method,arg)}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):new Promise(function(resolve){resolve(callInvokeWithMethodAndArg())})}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}while(true){var delegate=context.delegate;if(delegate){if(method==="return"||method==="throw"&&delegate.iterator[method]===undefined){context.delegate=null;var returnMethod=delegate.iterator["return"];if(returnMethod){var record=tryCatch(returnMethod,delegate.iterator,arg);if(record.type==="throw"){method="throw";arg=record.arg;continue}}if(method==="return"){continue}}var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if(record.type==="throw"){context.delegate=null;method="throw";arg=record.arg;continue}method="next";arg=undefined;var info=record.arg;if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc}else{state=GenStateSuspendedYield;return info}context.delegate=null}if(method==="next"){context._sent=arg;if(state===GenStateSuspendedYield){context.sent=arg}else{context.sent=undefined}}else if(method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw arg}if(context.dispatchException(arg)){method="next";arg=undefined}}else if(method==="return"){context.abrupt("return",arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg===ContinueSentinel){if(context.delegate&&method==="next"){arg=undefined}}else{return info}}else if(record.type==="throw"){state=GenStateCompleted;method="throw";arg=record.arg}}}}defineIteratorMethods(Gp);Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.next=finallyEntry.finallyLoc}else{this.complete(record)}return ContinueSentinel},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=record.arg;this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:typeof self==="object"?self:this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:4}],4:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],5:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],6:[function(require,module,exports){var UNSCOPABLES=require("./$.wks")("unscopables"),ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)require("./$.hide")(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true}},{"./$.hide":34,"./$.wks":86}],7:[function(require,module,exports){var isObject=require("./$.is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./$.is-object":41}],8:[function(require,module,exports){"use strict";var toObject=require("./$.to-object"),toIndex=require("./$.to-index"),toLength=require("./$.to-length");module.exports=[].copyWithin||function copyWithin(target,start){var O=toObject(this),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),$$=arguments,end=$$.length>2?$$[2]:undefined,count=Math.min((end===undefined?len:toIndex(end,len))-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1}while(count-- >0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O}},{"./$.to-index":79,"./$.to-length":82,"./$.to-object":83}],9:[function(require,module,exports){"use strict";var toObject=require("./$.to-object"),toIndex=require("./$.to-index"),toLength=require("./$.to-length");module.exports=[].fill||function fill(value){var O=toObject(this),length=toLength(O.length),$$=arguments,$$len=$$.length,index=toIndex($$len>1?$$[1]:undefined,length),end=$$len>2?$$[2]:undefined,endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O}},{"./$.to-index":79,"./$.to-length":82,"./$.to-object":83}],10:[function(require,module,exports){var toIObject=require("./$.to-iobject"),toLength=require("./$.to-length"),toIndex=require("./$.to-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length),value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index}return!IS_INCLUDES&&-1}}},{"./$.to-index":79,"./$.to-iobject":81,"./$.to-length":82}],11:[function(require,module,exports){var ctx=require("./$.ctx"),IObject=require("./$.iobject"),toObject=require("./$.to-object"),toLength=require("./$.to-length"),asc=require("./$.array-species-create");module.exports=function(TYPE){var IS_MAP=TYPE==1,IS_FILTER=TYPE==2,IS_SOME=TYPE==3,IS_EVERY=TYPE==4,IS_FIND_INDEX=TYPE==6,NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that){var O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?asc($this,length):IS_FILTER?asc($this,0):undefined,val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./$.array-species-create":12,"./$.ctx":20,"./$.iobject":37,"./$.to-length":82,"./$.to-object":83}],12:[function(require,module,exports){var isObject=require("./$.is-object"),isArray=require("./$.is-array"),SPECIES=require("./$.wks")("species");module.exports=function(original,length){var C;if(isArray(original)){C=original.constructor;if(typeof C=="function"&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return new(C===undefined?Array:C)(length)}},{"./$.is-array":39,"./$.is-object":41,"./$.wks":86}],13:[function(require,module,exports){var cof=require("./$.cof"),TAG=require("./$.wks")("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./$.cof":14,"./$.wks":86}],14:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],15:[function(require,module,exports){"use strict";var $=require("./$"),hide=require("./$.hide"),redefineAll=require("./$.redefine-all"),ctx=require("./$.ctx"),strictNew=require("./$.strict-new"),defined=require("./$.defined"),forOf=require("./$.for-of"),$iterDefine=require("./$.iter-define"),step=require("./$.iter-step"),ID=require("./$.uid")("id"),$has=require("./$.has"),isObject=require("./$.is-object"),setSpecies=require("./$.set-species"),DESCRIPTORS=require("./$.descriptors"),isExtensible=Object.isExtensible||isObject,SIZE=DESCRIPTORS?"_s":"size",id=0;var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!$has(it,ID)){if(!isExtensible(it))return"F";if(!create)return"E";hide(it,ID,++id)}return"O"+it[ID]};var getEntry=function(that,key){var index=fastKey(key),entry;if(index!=="F")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){strictNew(that,C,NAME);that._i=$.create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{clear:function clear(){for(var that=this,data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},"delete":function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3),entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(this,key)}});if(DESCRIPTORS)$.setDesc(C.prototype,"size",{get:function(){return defined(this[SIZE])}});return C},def:function(that,key,value){var entry=getEntry(that,key),prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=="F")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=iterated;this._k=kind;this._l=undefined},function(){var that=this,kind=that._k,entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1)}if(kind=="keys")return step(0,entry.k);if(kind=="values")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true);setSpecies(NAME)}}},{"./$":49,"./$.ctx":20,"./$.defined":21,"./$.descriptors":22,"./$.for-of":30,"./$.has":33,"./$.hide":34,"./$.is-object":41,"./$.iter-define":45,"./$.iter-step":47,"./$.redefine-all":63,"./$.set-species":68,"./$.strict-new":72,"./$.uid":85}],16:[function(require,module,exports){var forOf=require("./$.for-of"),classof=require("./$.classof");module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");var arr=[];forOf(this,false,arr.push,arr);return arr}}},{"./$.classof":13,"./$.for-of":30}],17:[function(require,module,exports){"use strict";var hide=require("./$.hide"),redefineAll=require("./$.redefine-all"),anObject=require("./$.an-object"),isObject=require("./$.is-object"),strictNew=require("./$.strict-new"),forOf=require("./$.for-of"),createArrayMethod=require("./$.array-methods"),$has=require("./$.has"),WEAK=require("./$.uid")("weak"),isExtensible=Object.isExtensible||isObject,arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),id=0;var frozenStore=function(that){return that._l||(that._l=new FrozenStore)};var FrozenStore=function(){this.a=[]};var findFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};FrozenStore.prototype={get:function(key){var entry=findFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findFrozen(this,key)},set:function(key,value){var entry=findFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value])},"delete":function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});if(~index)this.a.splice(index,1);return!!~index}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){strictNew(that,C,NAME);that._i=id++;that._l=undefined;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{"delete":function(key){if(!isObject(key))return false;if(!isExtensible(key))return frozenStore(this)["delete"](key);return $has(key,WEAK)&&$has(key[WEAK],this._i)&&delete key[WEAK][this._i]},has:function has(key){if(!isObject(key))return false;if(!isExtensible(key))return frozenStore(this).has(key);return $has(key,WEAK)&&$has(key[WEAK],this._i)}});return C},def:function(that,key,value){if(!isExtensible(anObject(key))){frozenStore(that).set(key,value)}else{$has(key,WEAK)||hide(key,WEAK,{});key[WEAK][that._i]=value}return that},frozenStore:frozenStore,WEAK:WEAK}},{"./$.an-object":7,"./$.array-methods":11,"./$.for-of":30,"./$.has":33,"./$.hide":34,"./$.is-object":41,"./$.redefine-all":63,"./$.strict-new":72,"./$.uid":85}],18:[function(require,module,exports){"use strict";var global=require("./$.global"),$export=require("./$.export"),redefine=require("./$.redefine"),redefineAll=require("./$.redefine-all"),forOf=require("./$.for-of"),strictNew=require("./$.strict-new"),isObject=require("./$.is-object"),fails=require("./$.fails"),$iterDetect=require("./$.iter-detect"),setToStringTag=require("./$.set-to-string-tag");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods)}else{var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO;if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){strictNew(target,C,NAME);var that=new Base;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that});C.prototype=proto;proto.constructor=C}IS_WEAK||instance.forEach(function(val,key){BUGGY_ZERO=1/key===-Infinity});if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},{"./$.export":25,"./$.fails":27,"./$.for-of":30,"./$.global":32,"./$.is-object":41,"./$.iter-detect":46,"./$.redefine":64,"./$.redefine-all":63,"./$.set-to-string-tag":69,"./$.strict-new":72}],19:[function(require,module,exports){var core=module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core},{}],20:[function(require,module,exports){var aFunction=require("./$.a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./$.a-function":5}],21:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],22:[function(require,module,exports){module.exports=!require("./$.fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./$.fails":27}],23:[function(require,module,exports){var isObject=require("./$.is-object"),document=require("./$.global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./$.global":32,"./$.is-object":41}],24:[function(require,module,exports){var $=require("./$");module.exports=function(it){var keys=$.getKeys(it),getSymbols=$.getSymbols;if(getSymbols){var symbols=getSymbols(it),isEnum=$.isEnum,i=0,key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))keys.push(key)}return keys}},{"./$":49}],25:[function(require,module,exports){var global=require("./$.global"),core=require("./$.core"),hide=require("./$.hide"),redefine=require("./$.redefine"),ctx=require("./$.ctx"),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={}),key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target&&!own)redefine(target,key,out);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;module.exports=$export},{"./$.core":19,"./$.ctx":20,"./$.global":32,"./$.hide":34,"./$.redefine":64}],26:[function(require,module,exports){var MATCH=require("./$.wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{re[MATCH]=false;return!"/./"[KEY](re)}catch(f){}}return true}},{"./$.wks":86}],27:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],28:[function(require,module,exports){"use strict";var hide=require("./$.hide"),redefine=require("./$.redefine"),fails=require("./$.fails"),defined=require("./$.defined"),wks=require("./$.wks");module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),original=""[KEY];if(fails(function(){var O={};O[SYMBOL]=function(){return 7};return""[KEY](O)!=7})){redefine(String.prototype,KEY,exec(defined,SYMBOL,original));
hide(RegExp.prototype,SYMBOL,length==2?function(string,arg){return original.call(string,this,arg)}:function(string){return original.call(string,this)})}}},{"./$.defined":21,"./$.fails":27,"./$.hide":34,"./$.redefine":64,"./$.wks":86}],29:[function(require,module,exports){"use strict";var anObject=require("./$.an-object");module.exports=function(){var that=anObject(this),result="";if(that.global)result+="g";if(that.ignoreCase)result+="i";if(that.multiline)result+="m";if(that.unicode)result+="u";if(that.sticky)result+="y";return result}},{"./$.an-object":7}],30:[function(require,module,exports){var ctx=require("./$.ctx"),call=require("./$.iter-call"),isArrayIter=require("./$.is-array-iter"),anObject=require("./$.an-object"),toLength=require("./$.to-length"),getIterFn=require("./core.get-iterator-method");module.exports=function(iterable,entries,fn,that){var iterFn=getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index])}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){call(iterator,f,step.value,entries)}}},{"./$.an-object":7,"./$.ctx":20,"./$.is-array-iter":38,"./$.iter-call":43,"./$.to-length":82,"./core.get-iterator-method":87}],31:[function(require,module,exports){var toIObject=require("./$.to-iobject"),getNames=require("./$").getNames,toString={}.toString;var windowNames=typeof window=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return getNames(it)}catch(e){return windowNames.slice()}};module.exports.get=function getOwnPropertyNames(it){if(windowNames&&toString.call(it)=="[object Window]")return getWindowNames(it);return getNames(toIObject(it))}},{"./$":49,"./$.to-iobject":81}],32:[function(require,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],33:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],34:[function(require,module,exports){var $=require("./$"),createDesc=require("./$.property-desc");module.exports=require("./$.descriptors")?function(object,key,value){return $.setDesc(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./$":49,"./$.descriptors":22,"./$.property-desc":62}],35:[function(require,module,exports){module.exports=require("./$.global").document&&document.documentElement},{"./$.global":32}],36:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],37:[function(require,module,exports){var cof=require("./$.cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./$.cof":14}],38:[function(require,module,exports){var Iterators=require("./$.iterators"),ITERATOR=require("./$.wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./$.iterators":48,"./$.wks":86}],39:[function(require,module,exports){var cof=require("./$.cof");module.exports=Array.isArray||function(arg){return cof(arg)=="Array"}},{"./$.cof":14}],40:[function(require,module,exports){var isObject=require("./$.is-object"),floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},{"./$.is-object":41}],41:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],42:[function(require,module,exports){var isObject=require("./$.is-object"),cof=require("./$.cof"),MATCH=require("./$.wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=="RegExp")}},{"./$.cof":14,"./$.is-object":41,"./$.wks":86}],43:[function(require,module,exports){var anObject=require("./$.an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./$.an-object":7}],44:[function(require,module,exports){"use strict";var $=require("./$"),descriptor=require("./$.property-desc"),setToStringTag=require("./$.set-to-string-tag"),IteratorPrototype={};require("./$.hide")(IteratorPrototype,require("./$.wks")("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=$.create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./$":49,"./$.hide":34,"./$.property-desc":62,"./$.set-to-string-tag":69,"./$.wks":86}],45:[function(require,module,exports){"use strict";var LIBRARY=require("./$.library"),$export=require("./$.export"),redefine=require("./$.redefine"),hide=require("./$.hide"),has=require("./$.has"),Iterators=require("./$.iterators"),$iterCreate=require("./$.iter-create"),setToStringTag=require("./$.set-to-string-tag"),getProto=require("./$").getProto,ITERATOR=require("./$.wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto($default.call(new Base));setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&has(proto,FF_ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);if(DEF_VALUES&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:!DEF_VALUES?$default:getMethod("entries")};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./$":49,"./$.export":25,"./$.has":33,"./$.hide":34,"./$.iter-create":44,"./$.iterators":48,"./$.library":51,"./$.redefine":64,"./$.set-to-string-tag":69,"./$.wks":86}],46:[function(require,module,exports){var ITERATOR=require("./$.wks")("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){safe=true};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./$.wks":86}],47:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],48:[function(require,module,exports){module.exports={}},{}],49:[function(require,module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},{}],50:[function(require,module,exports){var $=require("./$"),toIObject=require("./$.to-iobject");module.exports=function(object,el){var O=toIObject(object),keys=$.getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},{"./$":49,"./$.to-iobject":81}],51:[function(require,module,exports){module.exports=false},{}],52:[function(require,module,exports){module.exports=Math.expm1||function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}},{}],53:[function(require,module,exports){module.exports=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)}},{}],54:[function(require,module,exports){module.exports=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1}},{}],55:[function(require,module,exports){var global=require("./$.global"),macrotask=require("./$.task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode=require("./$.cof")(process)=="process",head,last,notify;var flush=function(){var parent,domain,fn;if(isNode&&(parent=process.domain)){process.domain=null;parent.exit()}while(head){domain=head.domain;fn=head.fn;if(domain)domain.enter();fn();if(domain)domain.exit();head=head.next}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer){var toggle=1,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=-toggle}}else if(Promise&&Promise.resolve){notify=function(){Promise.resolve().then(flush)}}else{notify=function(){macrotask.call(global,flush)}}module.exports=function asap(fn){var task={fn:fn,next:undefined,domain:isNode&&process.domain};if(last)last.next=task;if(!head){head=task;notify()}last=task}},{"./$.cof":14,"./$.global":32,"./$.task":78}],56:[function(require,module,exports){var $=require("./$"),toObject=require("./$.to-object"),IObject=require("./$.iobject");module.exports=require("./$.fails")(function(){var a=Object.assign,A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach(function(k){B[k]=k});return a({},A)[S]!=7||Object.keys(a({},B)).join("")!=K})?function assign(target,source){var T=toObject(target),$$=arguments,$$len=$$.length,index=1,getKeys=$.getKeys,getSymbols=$.getSymbols,isEnum=$.isEnum;while($$len>index){var S=IObject($$[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0,key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key]}return T}:Object.assign},{"./$":49,"./$.fails":27,"./$.iobject":37,"./$.to-object":83}],57:[function(require,module,exports){var $export=require("./$.export"),core=require("./$.core"),fails=require("./$.fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./$.core":19,"./$.export":25,"./$.fails":27}],58:[function(require,module,exports){var $=require("./$"),toIObject=require("./$.to-iobject"),isEnum=$.isEnum;module.exports=function(isEntries){return function(it){var O=toIObject(it),keys=$.getKeys(O),length=keys.length,i=0,result=[],key;while(length>i)if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key])}return result}}},{"./$":49,"./$.to-iobject":81}],59:[function(require,module,exports){var $=require("./$"),anObject=require("./$.an-object"),Reflect=require("./$.global").Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=$.getNames(anObject(it)),getSymbols=$.getSymbols;return getSymbols?keys.concat(getSymbols(it)):keys}},{"./$":49,"./$.an-object":7,"./$.global":32}],60:[function(require,module,exports){"use strict";var path=require("./$.path"),invoke=require("./$.invoke"),aFunction=require("./$.a-function");module.exports=function(){var fn=aFunction(this),length=arguments.length,pargs=Array(length),i=0,_=path._,holder=false;while(length>i)if((pargs[i]=arguments[i++])===_)holder=true;return function(){var that=this,$$=arguments,$$len=$$.length,j=0,k=0,args;if(!holder&&!$$len)return invoke(fn,pargs,that);args=pargs.slice();if(holder)for(;length>j;j++)if(args[j]===_)args[j]=$$[k++];while($$len>k)args.push($$[k++]);return invoke(fn,args,that)}}},{"./$.a-function":5,"./$.invoke":36,"./$.path":61}],61:[function(require,module,exports){module.exports=require("./$.global")},{"./$.global":32}],62:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],63:[function(require,module,exports){var redefine=require("./$.redefine");module.exports=function(target,src){for(var key in src)redefine(target,key,src[key]);return target}},{"./$.redefine":64}],64:[function(require,module,exports){var global=require("./$.global"),hide=require("./$.hide"),SRC=require("./$.uid")("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);require("./$.core").inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){if(typeof val=="function"){val.hasOwnProperty(SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));val.hasOwnProperty("name")||hide(val,"name",key)}if(O===global){O[key]=val}else{if(!safe)delete O[key];hide(O,key,val)}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})},{"./$.core":19,"./$.global":32,"./$.hide":34,"./$.uid":85}],65:[function(require,module,exports){module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){return String(it).replace(regExp,replacer)}}},{}],66:[function(require,module,exports){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}},{}],67:[function(require,module,exports){var getDesc=require("./$").getDesc,isObject=require("./$.is-object"),anObject=require("./$.an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./$.ctx")(Function.call,getDesc(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./$":49,"./$.an-object":7,"./$.ctx":20,"./$.is-object":41}],68:[function(require,module,exports){"use strict";var global=require("./$.global"),$=require("./$"),DESCRIPTORS=require("./$.descriptors"),SPECIES=require("./$.wks")("species");module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])$.setDesc(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./$":49,"./$.descriptors":22,"./$.global":32,"./$.wks":86}],69:[function(require,module,exports){var def=require("./$").setDesc,has=require("./$.has"),TAG=require("./$.wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./$":49,"./$.has":33,"./$.wks":86}],70:[function(require,module,exports){var global=require("./$.global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./$.global":32}],71:[function(require,module,exports){var anObject=require("./$.an-object"),aFunction=require("./$.a-function"),SPECIES=require("./$.wks")("species");module.exports=function(O,D){var C=anObject(O).constructor,S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./$.a-function":5,"./$.an-object":7,"./$.wks":86}],72:[function(require,module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it}},{}],73:[function(require,module,exports){var toInteger=require("./$.to-integer"),defined=require("./$.defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./$.defined":21,"./$.to-integer":80}],74:[function(require,module,exports){var isRegExp=require("./$.is-regexp"),defined=require("./$.defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{"./$.defined":21,"./$.is-regexp":42}],75:[function(require,module,exports){var toLength=require("./$.to-length"),repeat=require("./$.string-repeat"),defined=require("./$.defined");module.exports=function(that,maxLength,fillString,left){var S=String(defined(that)),stringLength=S.length,fillStr=fillString===undefined?" ":String(fillString),intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength)return S;if(fillStr=="")fillStr=" ";var fillLen=intMaxLength-stringLength,stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller}},{"./$.defined":21,"./$.string-repeat":76,"./$.to-length":82}],76:[function(require,module,exports){"use strict";var toInteger=require("./$.to-integer"),defined=require("./$.defined");module.exports=function repeat(count){var str=String(defined(this)),res="",n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res}},{"./$.defined":21,"./$.to-integer":80}],77:[function(require,module,exports){var $export=require("./$.export"),defined=require("./$.defined"),fails=require("./$.fails"),spaces="	\n\x0B\f\r   ᠎    "+"         　\u2028\u2029\ufeff",space="["+spaces+"]",non="​",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$");var exporter=function(KEY,exec){var exp={};exp[KEY]=exec(trim);$export($export.P+$export.F*fails(function(){return!!spaces[KEY]()||non[KEY]()!=non}),"String",exp)};var trim=exporter.trim=function(string,TYPE){string=String(defined(string));if(TYPE&1)string=string.replace(ltrim,"");if(TYPE&2)string=string.replace(rtrim,"");return string};module.exports=exporter},{"./$.defined":21,"./$.export":25,"./$.fails":27}],78:[function(require,module,exports){var ctx=require("./$.ctx"),invoke=require("./$.invoke"),html=require("./$.html"),cel=require("./$.dom-create"),global=require("./$.global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listner=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(require("./$.cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listner,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./$.cof":14,"./$.ctx":20,"./$.dom-create":23,"./$.global":32,"./$.html":35,"./$.invoke":36}],79:[function(require,module,exports){var toInteger=require("./$.to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},{"./$.to-integer":80}],80:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],81:[function(require,module,exports){var IObject=require("./$.iobject"),defined=require("./$.defined");module.exports=function(it){return IObject(defined(it))}},{"./$.defined":21,"./$.iobject":37}],82:[function(require,module,exports){var toInteger=require("./$.to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./$.to-integer":80}],83:[function(require,module,exports){var defined=require("./$.defined");module.exports=function(it){return Object(defined(it))}},{"./$.defined":21}],84:[function(require,module,exports){var isObject=require("./$.is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./$.is-object":41}],85:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],86:[function(require,module,exports){var store=require("./$.shared")("wks"),uid=require("./$.uid"),Symbol=require("./$.global").Symbol;module.exports=function(name){return store[name]||(store[name]=Symbol&&Symbol[name]||(Symbol||uid)("Symbol."+name))}},{"./$.global":32,"./$.shared":70,"./$.uid":85}],87:[function(require,module,exports){var classof=require("./$.classof"),ITERATOR=require("./$.wks")("iterator"),Iterators=require("./$.iterators");module.exports=require("./$.core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./$.classof":13,"./$.core":19,"./$.iterators":48,"./$.wks":86}],88:[function(require,module,exports){"use strict";var $=require("./$"),$export=require("./$.export"),DESCRIPTORS=require("./$.descriptors"),createDesc=require("./$.property-desc"),html=require("./$.html"),cel=require("./$.dom-create"),has=require("./$.has"),cof=require("./$.cof"),invoke=require("./$.invoke"),fails=require("./$.fails"),anObject=require("./$.an-object"),aFunction=require("./$.a-function"),isObject=require("./$.is-object"),toObject=require("./$.to-object"),toIObject=require("./$.to-iobject"),toInteger=require("./$.to-integer"),toIndex=require("./$.to-index"),toLength=require("./$.to-length"),IObject=require("./$.iobject"),IE_PROTO=require("./$.uid")("__proto__"),createArrayMethod=require("./$.array-methods"),arrayIndexOf=require("./$.array-includes")(false),ObjectProto=Object.prototype,ArrayProto=Array.prototype,arraySlice=ArrayProto.slice,arrayJoin=ArrayProto.join,defineProperty=$.setDesc,getOwnDescriptor=$.getDesc,defineProperties=$.setDescs,factories={},IE8_DOM_DEFINE;if(!DESCRIPTORS){IE8_DOM_DEFINE=!fails(function(){return defineProperty(cel("div"),"a",{get:function(){return 7}}).a!=7});$.setDesc=function(O,P,Attributes){if(IE8_DOM_DEFINE)try{return defineProperty(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)anObject(O)[P]=Attributes.value;return O};$.getDesc=function(O,P){if(IE8_DOM_DEFINE)try{return getOwnDescriptor(O,P)}catch(e){}if(has(O,P))return createDesc(!ObjectProto.propertyIsEnumerable.call(O,P),O[P])};$.setDescs=defineProperties=function(O,Properties){anObject(O);var keys=$.getKeys(Properties),length=keys.length,i=0,P;while(length>i)$.setDesc(O,P=keys[i++],Properties[P]);return O}}$export($export.S+$export.F*!DESCRIPTORS,"Object",{getOwnPropertyDescriptor:$.getDesc,defineProperty:$.setDesc,defineProperties:defineProperties});var keys1=("constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,"+"toLocaleString,toString,valueOf").split(","),keys2=keys1.concat("length","prototype"),keysLen1=keys1.length;var createDict=function(){var iframe=cel("iframe"),i=keysLen1,gt=">",iframeDocument;iframe.style.display="none";html.appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write("<script>document.F=Object</script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict.prototype[keys1[i]];return createDict()};var createGetKeys=function(names,length){return function(object){var O=toIObject(object),i=0,result=[],key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}};var Empty=function(){};$export($export.S,"Object",{getPrototypeOf:$.getProto=$.getProto||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null},getOwnPropertyNames:$.getNames=$.getNames||createGetKeys(keys2,keys2.length,true),create:$.create=$.create||function(O,Properties){var result;if(O!==null){Empty.prototype=anObject(O);result=new Empty;Empty.prototype=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:defineProperties(result,Properties)},keys:$.getKeys=$.getKeys||createGetKeys(keys1,keysLen1,false)});var construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)};$export($export.P,"Function",{bind:function bind(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1);var bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that)};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound}});$export($export.P+$export.F*fails(function(){if(html)arraySlice.call(html)}),"Array",{slice:function(begin,end){var len=toLength(this.length),klass=cof(this);end=end===undefined?len:end;if(klass=="Array")return arraySlice.call(this,begin,end);var start=toIndex(begin,len),upTo=toIndex(end,len),size=toLength(upTo-start),cloned=Array(size),i=0;for(;i<size;i++)cloned[i]=klass=="String"?this.charAt(start+i):this[start+i];return cloned}});$export($export.P+$export.F*(IObject!=Object),"Array",{join:function join(separator){return arrayJoin.call(IObject(this),separator===undefined?",":separator)}});$export($export.S,"Array",{isArray:require("./$.is-array")});var createArrayReduce=function(isRight){return function(callbackfn,memo){aFunction(callbackfn);var O=IObject(this),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(arguments.length<2)for(;;){if(index in O){memo=O[index];index+=i;break}index+=i;if(isRight?index<0:length<=index){throw TypeError("Reduce of empty array with no initial value")}}for(;isRight?index>=0:length>index;index+=i)if(index in O){memo=callbackfn(memo,O[index],index,this)}return memo}};var methodize=function($fn){return function(arg1){return $fn(this,arg1,arguments[1])}};$export($export.P,"Array",{forEach:$.each=$.each||methodize(createArrayMethod(0)),map:methodize(createArrayMethod(1)),filter:methodize(createArrayMethod(2)),some:methodize(createArrayMethod(3)),every:methodize(createArrayMethod(4)),reduce:createArrayReduce(false),reduceRight:createArrayReduce(true),indexOf:methodize(arrayIndexOf),lastIndexOf:function(el,fromIndex){var O=toIObject(this),length=toLength(O.length),index=length-1;if(arguments.length>1)index=Math.min(index,toInteger(fromIndex));if(index<0)index=toLength(length+index);for(;index>=0;index--)if(index in O)if(O[index]===el)return index;return-1}});$export($export.S,"Date",{now:function(){return+new Date}});var lz=function(num){return num>9?num:"0"+num};$export($export.P+$export.F*(fails(function(){return new Date(-5e13-1).toISOString()!="0385-07-25T07:06:39.999Z"})||!fails(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function toISOString(){if(!isFinite(this))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}})},{"./$":49,"./$.a-function":5,"./$.an-object":7,"./$.array-includes":10,"./$.array-methods":11,"./$.cof":14,"./$.descriptors":22,"./$.dom-create":23,"./$.export":25,"./$.fails":27,"./$.has":33,"./$.html":35,"./$.invoke":36,"./$.iobject":37,"./$.is-array":39,"./$.is-object":41,"./$.property-desc":62,"./$.to-index":79,"./$.to-integer":80,"./$.to-iobject":81,"./$.to-length":82,"./$.to-object":83,"./$.uid":85}],89:[function(require,module,exports){var $export=require("./$.export");$export($export.P,"Array",{copyWithin:require("./$.array-copy-within")});require("./$.add-to-unscopables")("copyWithin")},{"./$.add-to-unscopables":6,"./$.array-copy-within":8,"./$.export":25}],90:[function(require,module,exports){var $export=require("./$.export");$export($export.P,"Array",{fill:require("./$.array-fill")});require("./$.add-to-unscopables")("fill")},{"./$.add-to-unscopables":6,"./$.array-fill":9,"./$.export":25}],91:[function(require,module,exports){"use strict";var $export=require("./$.export"),$find=require("./$.array-methods")(6),KEY="findIndex",forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{findIndex:function findIndex(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./$.add-to-unscopables")(KEY)},{"./$.add-to-unscopables":6,"./$.array-methods":11,"./$.export":25}],92:[function(require,module,exports){"use strict";var $export=require("./$.export"),$find=require("./$.array-methods")(5),KEY="find",forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false});$export($export.P+$export.F*forced,"Array",{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}});require("./$.add-to-unscopables")(KEY)},{"./$.add-to-unscopables":6,"./$.array-methods":11,"./$.export":25}],93:[function(require,module,exports){"use strict";var ctx=require("./$.ctx"),$export=require("./$.export"),toObject=require("./$.to-object"),call=require("./$.iter-call"),isArrayIter=require("./$.is-array-iter"),toLength=require("./$.to-length"),getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./$.iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike),C=typeof this=="function"?this:Array,$$=arguments,$$len=$$.length,mapfn=$$len>1?$$[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=getIterFn(O),length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,$$len>2?$$[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){
result[index]=mapping?call(iterator,mapfn,[step.value,index],true):step.value}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){result[index]=mapping?mapfn(O[index],index):O[index]}}result.length=index;return result}})},{"./$.ctx":20,"./$.export":25,"./$.is-array-iter":38,"./$.iter-call":43,"./$.iter-detect":46,"./$.to-length":82,"./$.to-object":83,"./core.get-iterator-method":87}],94:[function(require,module,exports){"use strict";var addToUnscopables=require("./$.add-to-unscopables"),step=require("./$.iter-step"),Iterators=require("./$.iterators"),toIObject=require("./$.to-iobject");module.exports=require("./$.iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./$.add-to-unscopables":6,"./$.iter-define":45,"./$.iter-step":47,"./$.iterators":48,"./$.to-iobject":81}],95:[function(require,module,exports){"use strict";var $export=require("./$.export");$export($export.S+$export.F*require("./$.fails")(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function of(){var index=0,$$=arguments,$$len=$$.length,result=new(typeof this=="function"?this:Array)($$len);while($$len>index)result[index]=$$[index++];result.length=$$len;return result}})},{"./$.export":25,"./$.fails":27}],96:[function(require,module,exports){require("./$.set-species")("Array")},{"./$.set-species":68}],97:[function(require,module,exports){"use strict";var $=require("./$"),isObject=require("./$.is-object"),HAS_INSTANCE=require("./$.wks")("hasInstance"),FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))$.setDesc(FunctionProto,HAS_INSTANCE,{value:function(O){if(typeof this!="function"||!isObject(O))return false;if(!isObject(this.prototype))return O instanceof this;while(O=$.getProto(O))if(this.prototype===O)return true;return false}})},{"./$":49,"./$.is-object":41,"./$.wks":86}],98:[function(require,module,exports){var setDesc=require("./$").setDesc,createDesc=require("./$.property-desc"),has=require("./$.has"),FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/,NAME="name";NAME in FProto||require("./$.descriptors")&&setDesc(FProto,NAME,{configurable:true,get:function(){var match=(""+this).match(nameRE),name=match?match[1]:"";has(this,NAME)||setDesc(this,NAME,createDesc(5,name));return name}})},{"./$":49,"./$.descriptors":22,"./$.has":33,"./$.property-desc":62}],99:[function(require,module,exports){"use strict";var strong=require("./$.collection-strong");require("./$.collection")("Map",function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=strong.getEntry(this,key);return entry&&entry.v},set:function set(key,value){return strong.def(this,key===0?0:key,value)}},strong,true)},{"./$.collection":18,"./$.collection-strong":15}],100:[function(require,module,exports){var $export=require("./$.export"),log1p=require("./$.math-log1p"),sqrt=Math.sqrt,$acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710),"Math",{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},{"./$.export":25,"./$.math-log1p":53}],101:[function(require,module,exports){var $export=require("./$.export");function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1))}$export($export.S,"Math",{asinh:asinh})},{"./$.export":25}],102:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2}})},{"./$.export":25}],103:[function(require,module,exports){var $export=require("./$.export"),sign=require("./$.math-sign");$export($export.S,"Math",{cbrt:function cbrt(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},{"./$.export":25,"./$.math-sign":54}],104:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},{"./$.export":25}],105:[function(require,module,exports){var $export=require("./$.export"),exp=Math.exp;$export($export.S,"Math",{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2}})},{"./$.export":25}],106:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{expm1:require("./$.math-expm1")})},{"./$.export":25,"./$.math-expm1":52}],107:[function(require,module,exports){var $export=require("./$.export"),sign=require("./$.math-sign"),pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126);var roundTiesToEven=function(n){return n+1/EPSILON-1/EPSILON};$export($export.S,"Math",{fround:function fround(x){var $abs=Math.abs(x),$sign=sign(x),a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result}})},{"./$.export":25,"./$.math-sign":54}],108:[function(require,module,exports){var $export=require("./$.export"),abs=Math.abs;$export($export.S,"Math",{hypot:function hypot(value1,value2){var sum=0,i=0,$$=arguments,$$len=$$.length,larg=0,arg,div;while(i<$$len){arg=abs($$[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg}else if(arg>0){div=arg/larg;sum+=div*div}else sum+=arg}return larg===Infinity?Infinity:larg*Math.sqrt(sum)}})},{"./$.export":25}],109:[function(require,module,exports){var $export=require("./$.export"),$imul=Math.imul;$export($export.S+$export.F*require("./$.fails")(function(){return $imul(4294967295,5)!=-5||$imul.length!=2}),"Math",{imul:function imul(x,y){var UINT16=65535,xn=+x,yn=+y,xl=UINT16&xn,yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0)}})},{"./$.export":25,"./$.fails":27}],110:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{log10:function log10(x){return Math.log(x)/Math.LN10}})},{"./$.export":25}],111:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{log1p:require("./$.math-log1p")})},{"./$.export":25,"./$.math-log1p":53}],112:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{log2:function log2(x){return Math.log(x)/Math.LN2}})},{"./$.export":25}],113:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{sign:require("./$.math-sign")})},{"./$.export":25,"./$.math-sign":54}],114:[function(require,module,exports){var $export=require("./$.export"),expm1=require("./$.math-expm1"),exp=Math.exp;$export($export.S+$export.F*require("./$.fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function sinh(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},{"./$.export":25,"./$.fails":27,"./$.math-expm1":52}],115:[function(require,module,exports){var $export=require("./$.export"),expm1=require("./$.math-expm1"),exp=Math.exp;$export($export.S,"Math",{tanh:function tanh(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))}})},{"./$.export":25,"./$.math-expm1":52}],116:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Math",{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it)}})},{"./$.export":25}],117:[function(require,module,exports){"use strict";var $=require("./$"),global=require("./$.global"),has=require("./$.has"),cof=require("./$.cof"),toPrimitive=require("./$.to-primitive"),fails=require("./$.fails"),$trim=require("./$.string-trim").trim,NUMBER="Number",$Number=global[NUMBER],Base=$Number,proto=$Number.prototype,BROKEN_COF=cof($.create(proto))==NUMBER,TRIM="trim"in String.prototype;var toNumber=function(argument){var it=toPrimitive(argument,false);if(typeof it=="string"&&it.length>2){it=TRIM?it.trim():$trim(it,3);var first=it.charCodeAt(0),third,radix,maxCode;if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it}for(var digits=it.slice(2),i=0,l=digits.length,code;i<l;i++){code=digits.charCodeAt(i);if(code<48||code>maxCode)return NaN}return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function Number(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):cof(that)!=NUMBER)?new Base(toNumber(it)):toNumber(it)};$.each.call(require("./$.descriptors")?$.getNames(Base):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),function(key){if(has(Base,key)&&!has($Number,key)){$.setDesc($Number,key,$.getDesc(Base,key))}});$Number.prototype=proto;proto.constructor=$Number;require("./$.redefine")(global,NUMBER,$Number)}},{"./$":49,"./$.cof":14,"./$.descriptors":22,"./$.fails":27,"./$.global":32,"./$.has":33,"./$.redefine":64,"./$.string-trim":77,"./$.to-primitive":84}],118:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./$.export":25}],119:[function(require,module,exports){var $export=require("./$.export"),_isFinite=require("./$.global").isFinite;$export($export.S,"Number",{isFinite:function isFinite(it){return typeof it=="number"&&_isFinite(it)}})},{"./$.export":25,"./$.global":32}],120:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{isInteger:require("./$.is-integer")})},{"./$.export":25,"./$.is-integer":40}],121:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{isNaN:function isNaN(number){return number!=number}})},{"./$.export":25}],122:[function(require,module,exports){var $export=require("./$.export"),isInteger=require("./$.is-integer"),abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=9007199254740991}})},{"./$.export":25,"./$.is-integer":40}],123:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./$.export":25}],124:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./$.export":25}],125:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{parseFloat:parseFloat})},{"./$.export":25}],126:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Number",{parseInt:parseInt})},{"./$.export":25}],127:[function(require,module,exports){var $export=require("./$.export");$export($export.S+$export.F,"Object",{assign:require("./$.object-assign")})},{"./$.export":25,"./$.object-assign":56}],128:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("freeze",function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(it):it}})},{"./$.is-object":41,"./$.object-sap":57}],129:[function(require,module,exports){var toIObject=require("./$.to-iobject");require("./$.object-sap")("getOwnPropertyDescriptor",function($getOwnPropertyDescriptor){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{"./$.object-sap":57,"./$.to-iobject":81}],130:[function(require,module,exports){require("./$.object-sap")("getOwnPropertyNames",function(){return require("./$.get-names").get})},{"./$.get-names":31,"./$.object-sap":57}],131:[function(require,module,exports){var toObject=require("./$.to-object");require("./$.object-sap")("getPrototypeOf",function($getPrototypeOf){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it))}})},{"./$.object-sap":57,"./$.to-object":83}],132:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("isExtensible",function($isExtensible){return function isExtensible(it){return isObject(it)?$isExtensible?$isExtensible(it):true:false}})},{"./$.is-object":41,"./$.object-sap":57}],133:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("isFrozen",function($isFrozen){return function isFrozen(it){return isObject(it)?$isFrozen?$isFrozen(it):false:true}})},{"./$.is-object":41,"./$.object-sap":57}],134:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("isSealed",function($isSealed){return function isSealed(it){return isObject(it)?$isSealed?$isSealed(it):false:true}})},{"./$.is-object":41,"./$.object-sap":57}],135:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Object",{is:require("./$.same-value")})},{"./$.export":25,"./$.same-value":66}],136:[function(require,module,exports){var toObject=require("./$.to-object");require("./$.object-sap")("keys",function($keys){return function keys(it){return $keys(toObject(it))}})},{"./$.object-sap":57,"./$.to-object":83}],137:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("preventExtensions",function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&isObject(it)?$preventExtensions(it):it}})},{"./$.is-object":41,"./$.object-sap":57}],138:[function(require,module,exports){var isObject=require("./$.is-object");require("./$.object-sap")("seal",function($seal){return function seal(it){return $seal&&isObject(it)?$seal(it):it}})},{"./$.is-object":41,"./$.object-sap":57}],139:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Object",{setPrototypeOf:require("./$.set-proto").set})},{"./$.export":25,"./$.set-proto":67}],140:[function(require,module,exports){"use strict";var classof=require("./$.classof"),test={};test[require("./$.wks")("toStringTag")]="z";if(test+""!="[object z]"){require("./$.redefine")(Object.prototype,"toString",function toString(){return"[object "+classof(this)+"]"},true)}},{"./$.classof":13,"./$.redefine":64,"./$.wks":86}],141:[function(require,module,exports){"use strict";var $=require("./$"),LIBRARY=require("./$.library"),global=require("./$.global"),ctx=require("./$.ctx"),classof=require("./$.classof"),$export=require("./$.export"),isObject=require("./$.is-object"),anObject=require("./$.an-object"),aFunction=require("./$.a-function"),strictNew=require("./$.strict-new"),forOf=require("./$.for-of"),setProto=require("./$.set-proto").set,same=require("./$.same-value"),SPECIES=require("./$.wks")("species"),speciesConstructor=require("./$.species-constructor"),asap=require("./$.microtask"),PROMISE="Promise",process=global.process,isNode=classof(process)=="process",P=global[PROMISE],Wrapper;var testResolve=function(sub){var test=new P(function(){});if(sub)test.constructor=Object;return P.resolve(test)===test};var USE_NATIVE=function(){var works=false;function P2(x){var self=new P(x);setProto(self,P2.prototype);return self}try{works=P&&P.resolve&&testResolve();setProto(P2,P);P2.prototype=$.create(P.prototype,{constructor:{value:P2}});if(!(P2.resolve(5).then(function(){})instanceof P2)){works=false}if(works&&require("./$.descriptors")){var thenableThenGotten=false;P.resolve($.setDesc({},"then",{get:function(){thenableThenGotten=true}}));works=thenableThenGotten}}catch(e){works=false}return works}();var sameConstructor=function(a,b){if(LIBRARY&&a===P&&b===Wrapper)return true;return same(a,b)};var getConstructor=function(C){var S=anObject(C)[SPECIES];return S!=undefined?S:C};var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject});this.resolve=aFunction(resolve),this.reject=aFunction(reject)};var perform=function(exec){try{exec()}catch(e){return{error:e}}};var notify=function(record,isReject){if(record.n)return;record.n=true;var chain=record.c;asap(function(){var value=record.v,ok=record.s==1,i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,result,then;try{if(handler){if(!ok)record.h=true;result=handler===true?value:handler(value);if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){reject(e)}};while(chain.length>i)run(chain[i++]);chain.length=0;record.n=false;if(isReject)setTimeout(function(){var promise=record.p,handler,console;if(isUnhandled(promise)){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}}record.a=undefined},1)})};var isUnhandled=function(promise){var record=promise._d,chain=record.a||record.c,i=0,reaction;if(record.h)return false;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false}return true};var $reject=function(value){var record=this;if(record.d)return;record.d=true;record=record.r||record;record.v=value;record.s=2;record.a=record.c.slice();notify(record,true)};var $resolve=function(value){var record=this,then;if(record.d)return;record.d=true;record=record.r||record;try{if(record.p===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){asap(function(){var wrapper={r:record,d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}})}else{record.v=value;record.s=1;notify(record,false)}}catch(e){$reject.call({r:record,d:false},e)}};if(!USE_NATIVE){P=function Promise(executor){aFunction(executor);var record=this._d={p:strictNew(this,P,PROMISE),c:[],a:undefined,s:0,d:false,v:undefined,h:false,n:false};try{executor(ctx($resolve,record,1),ctx($reject,record,1))}catch(err){$reject.call(record,err)}};require("./$.redefine-all")(P.prototype,{then:function then(onFulfilled,onRejected){var reaction=new PromiseCapability(speciesConstructor(this,P)),promise=reaction.promise,record=this._d;reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;record.c.push(reaction);if(record.a)record.a.push(reaction);if(record.s)notify(record,false);return promise},"catch":function(onRejected){return this.then(undefined,onRejected)}})}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:P});require("./$.set-to-string-tag")(P,PROMISE);require("./$.set-species")(PROMISE);Wrapper=require("./$.core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=new PromiseCapability(this),$$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(!USE_NATIVE||testResolve(true)),PROMISE,{resolve:function resolve(x){if(x instanceof P&&sameConstructor(x.constructor,this))return x;var capability=new PromiseCapability(this),$$resolve=capability.resolve;$$resolve(x);return capability.promise}});$export($export.S+$export.F*!(USE_NATIVE&&require("./$.iter-detect")(function(iter){P.all(iter)["catch"](function(){})})),PROMISE,{all:function all(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),resolve=capability.resolve,reject=capability.reject,values=[];var abrupt=perform(function(){forOf(iterable,false,values.push,values);var remaining=values.length,results=Array(remaining);if(remaining)$.each.call(values,function(promise,index){var alreadyCalled=false;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;results[index]=value;--remaining||resolve(results)},reject)});else resolve(results)});if(abrupt)reject(abrupt.error);return capability.promise},race:function race(iterable){var C=getConstructor(this),capability=new PromiseCapability(C),reject=capability.reject;var abrupt=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject)})});if(abrupt)reject(abrupt.error);return capability.promise}})},{"./$":49,"./$.a-function":5,"./$.an-object":7,"./$.classof":13,"./$.core":19,"./$.ctx":20,"./$.descriptors":22,"./$.export":25,"./$.for-of":30,"./$.global":32,"./$.is-object":41,"./$.iter-detect":46,"./$.library":51,"./$.microtask":55,"./$.redefine-all":63,"./$.same-value":66,"./$.set-proto":67,"./$.set-species":68,"./$.set-to-string-tag":69,"./$.species-constructor":71,"./$.strict-new":72,"./$.wks":86}],142:[function(require,module,exports){var $export=require("./$.export"),_apply=Function.apply;$export($export.S,"Reflect",{apply:function apply(target,thisArgument,argumentsList){return _apply.call(target,thisArgument,argumentsList)}})},{"./$.export":25}],143:[function(require,module,exports){var $=require("./$"),$export=require("./$.export"),aFunction=require("./$.a-function"),anObject=require("./$.an-object"),isObject=require("./$.is-object"),bind=Function.bind||require("./$.core").Function.prototype.bind;$export($export.S+$export.F*require("./$.fails")(function(){function F(){}return!(Reflect.construct(function(){},[],F)instanceof F)}),"Reflect",{construct:function construct(Target,args){aFunction(Target);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(Target==newTarget){if(args!=undefined)switch(anObject(args).length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];$args.push.apply($args,args);return new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=$.create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},{"./$":49,"./$.a-function":5,"./$.an-object":7,"./$.core":19,"./$.export":25,"./$.fails":27,"./$.is-object":41}],144:[function(require,module,exports){var $=require("./$"),$export=require("./$.export"),anObject=require("./$.an-object");$export($export.S+$export.F*require("./$.fails")(function(){Reflect.defineProperty($.setDesc({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function defineProperty(target,propertyKey,attributes){anObject(target);try{$.setDesc(target,propertyKey,attributes);return true}catch(e){return false}}})},{"./$":49,"./$.an-object":7,"./$.export":25,"./$.fails":27}],145:[function(require,module,exports){var $export=require("./$.export"),getDesc=require("./$").getDesc,anObject=require("./$.an-object");$export($export.S,"Reflect",{deleteProperty:function deleteProperty(target,propertyKey){var desc=getDesc(anObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]}})},{"./$":49,"./$.an-object":7,"./$.export":25}],146:[function(require,module,exports){"use strict";var $export=require("./$.export"),anObject=require("./$.an-object");var Enumerate=function(iterated){this._t=anObject(iterated);this._i=0;var keys=this._k=[],key;for(key in iterated)keys.push(key)};require("./$.iter-create")(Enumerate,"Object",function(){var that=this,keys=that._k,key;do{if(that._i>=keys.length)return{value:undefined,done:true}}while(!((key=keys[that._i++])in that._t));return{value:key,done:false}});$export($export.S,"Reflect",{enumerate:function enumerate(target){return new Enumerate(target)}})},{"./$.an-object":7,"./$.export":25,"./$.iter-create":44}],147:[function(require,module,exports){var $=require("./$"),$export=require("./$.export"),anObject=require("./$.an-object");$export($export.S,"Reflect",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return $.getDesc(anObject(target),propertyKey)}})},{"./$":49,"./$.an-object":7,"./$.export":25}],148:[function(require,module,exports){var $export=require("./$.export"),getProto=require("./$").getProto,anObject=require("./$.an-object");$export($export.S,"Reflect",{getPrototypeOf:function getPrototypeOf(target){return getProto(anObject(target))}})},{"./$":49,"./$.an-object":7,"./$.export":25}],149:[function(require,module,exports){var $=require("./$"),has=require("./$.has"),$export=require("./$.export"),isObject=require("./$.is-object"),anObject=require("./$.an-object");function get(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc,proto;if(anObject(target)===receiver)return target[propertyKey];if(desc=$.getDesc(target,propertyKey))return has(desc,"value")?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined;if(isObject(proto=$.getProto(target)))return get(proto,propertyKey,receiver)}$export($export.S,"Reflect",{get:get})},{"./$":49,"./$.an-object":7,"./$.export":25,"./$.has":33,"./$.is-object":41}],150:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Reflect",{has:function has(target,propertyKey){return propertyKey in target}})},{"./$.export":25}],151:[function(require,module,exports){var $export=require("./$.export"),anObject=require("./$.an-object"),$isExtensible=Object.isExtensible;$export($export.S,"Reflect",{isExtensible:function isExtensible(target){anObject(target);return $isExtensible?$isExtensible(target):true}})},{"./$.an-object":7,"./$.export":25}],152:[function(require,module,exports){var $export=require("./$.export");$export($export.S,"Reflect",{ownKeys:require("./$.own-keys")})},{"./$.export":25,"./$.own-keys":59}],153:[function(require,module,exports){var $export=require("./$.export"),anObject=require("./$.an-object"),$preventExtensions=Object.preventExtensions;$export($export.S,"Reflect",{preventExtensions:function preventExtensions(target){anObject(target);try{if($preventExtensions)$preventExtensions(target);return true}catch(e){return false}}})},{"./$.an-object":7,"./$.export":25}],154:[function(require,module,exports){var $export=require("./$.export"),setProto=require("./$.set-proto");if(setProto)$export($export.S,"Reflect",{setPrototypeOf:function setPrototypeOf(target,proto){setProto.check(target,proto);try{setProto.set(target,proto);return true}catch(e){return false}}})},{"./$.export":25,"./$.set-proto":67}],155:[function(require,module,exports){var $=require("./$"),has=require("./$.has"),$export=require("./$.export"),createDesc=require("./$.property-desc"),anObject=require("./$.an-object"),isObject=require("./$.is-object");function set(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=$.getDesc(anObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=$.getProto(target))){return set(proto,propertyKey,V,receiver)}ownDesc=createDesc(0)}if(has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=$.getDesc(receiver,propertyKey)||createDesc(0);existingDescriptor.value=V;$.setDesc(receiver,propertyKey,existingDescriptor);return true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}$export($export.S,"Reflect",{set:set})},{"./$":49,"./$.an-object":7,"./$.export":25,"./$.has":33,"./$.is-object":41,"./$.property-desc":62}],156:[function(require,module,exports){var $=require("./$"),global=require("./$.global"),isRegExp=require("./$.is-regexp"),$flags=require("./$.flags"),$RegExp=global.RegExp,Base=$RegExp,proto=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(require("./$.descriptors")&&(!CORRECT_NEW||require("./$.fails")(function(){re2[require("./$.wks")("match")]=false;return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,"i")!="/a/i"}))){$RegExp=function RegExp(p,f){var piRE=isRegExp(p),fiU=f===undefined;return!(this instanceof $RegExp)&&piRE&&p.constructor===$RegExp&&fiU?p:CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f)};$.each.call($.getNames(Base),function(key){key in $RegExp||$.setDesc($RegExp,key,{configurable:true,get:function(){return Base[key]},set:function(it){Base[key]=it}})});proto.constructor=$RegExp;$RegExp.prototype=proto;require("./$.redefine")(global,"RegExp",$RegExp)}require("./$.set-species")("RegExp")},{"./$":49,"./$.descriptors":22,"./$.fails":27,"./$.flags":29,"./$.global":32,"./$.is-regexp":42,"./$.redefine":64,"./$.set-species":68,"./$.wks":86}],157:[function(require,module,exports){var $=require("./$");if(require("./$.descriptors")&&/./g.flags!="g")$.setDesc(RegExp.prototype,"flags",{configurable:true,get:require("./$.flags")})},{"./$":49,"./$.descriptors":22,"./$.flags":29}],158:[function(require,module,exports){require("./$.fix-re-wks")("match",1,function(defined,MATCH){return function match(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))}})},{"./$.fix-re-wks":28}],159:[function(require,module,exports){require("./$.fix-re-wks")("replace",2,function(defined,REPLACE,$replace){return function replace(searchValue,replaceValue){"use strict";var O=defined(this),fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)}})},{"./$.fix-re-wks":28}],160:[function(require,module,exports){require("./$.fix-re-wks")("search",1,function(defined,SEARCH){return function search(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))}})},{"./$.fix-re-wks":28}],161:[function(require,module,exports){require("./$.fix-re-wks")("split",2,function(defined,SPLIT,$split){return function split(separator,limit){"use strict";var O=defined(this),fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit)}})},{"./$.fix-re-wks":28}],162:[function(require,module,exports){"use strict";var strong=require("./$.collection-strong");require("./$.collection")("Set",function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return strong.def(this,value=value===0?0:value,value)}},strong)},{"./$.collection":18,"./$.collection-strong":15}],163:[function(require,module,exports){"use strict";var $export=require("./$.export"),$at=require("./$.string-at")(false);$export($export.P,"String",{codePointAt:function codePointAt(pos){return $at(this,pos)}})},{"./$.export":25,"./$.string-at":73}],164:[function(require,module,exports){"use strict";var $export=require("./$.export"),toLength=require("./$.to-length"),context=require("./$.string-context"),ENDS_WITH="endsWith",$endsWith=""[ENDS_WITH];$export($export.P+$export.F*require("./$.fails-is-regexp")(ENDS_WITH),"String",{endsWith:function endsWith(searchString){var that=context(this,searchString,ENDS_WITH),$$=arguments,endPosition=$$.length>1?$$[1]:undefined,len=toLength(that.length),end=endPosition===undefined?len:Math.min(toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{"./$.export":25,"./$.fails-is-regexp":26,"./$.string-context":74,"./$.to-length":82}],165:[function(require,module,exports){var $export=require("./$.export"),toIndex=require("./$.to-index"),fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;
$export($export.S+$export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),"String",{fromCodePoint:function fromCodePoint(x){var res=[],$$=arguments,$$len=$$.length,i=0,code;while($$len>i){code=+$$[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")}})},{"./$.export":25,"./$.to-index":79}],166:[function(require,module,exports){"use strict";var $export=require("./$.export"),context=require("./$.string-context"),INCLUDES="includes";$export($export.P+$export.F*require("./$.fails-is-regexp")(INCLUDES),"String",{includes:function includes(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined)}})},{"./$.export":25,"./$.fails-is-regexp":26,"./$.string-context":74}],167:[function(require,module,exports){"use strict";var $at=require("./$.string-at")(true);require("./$.iter-define")(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},{"./$.iter-define":45,"./$.string-at":73}],168:[function(require,module,exports){var $export=require("./$.export"),toIObject=require("./$.to-iobject"),toLength=require("./$.to-length");$export($export.S,"String",{raw:function raw(callSite){var tpl=toIObject(callSite.raw),len=toLength(tpl.length),$$=arguments,$$len=$$.length,res=[],i=0;while(len>i){res.push(String(tpl[i++]));if(i<$$len)res.push(String($$[i]))}return res.join("")}})},{"./$.export":25,"./$.to-iobject":81,"./$.to-length":82}],169:[function(require,module,exports){var $export=require("./$.export");$export($export.P,"String",{repeat:require("./$.string-repeat")})},{"./$.export":25,"./$.string-repeat":76}],170:[function(require,module,exports){"use strict";var $export=require("./$.export"),toLength=require("./$.to-length"),context=require("./$.string-context"),STARTS_WITH="startsWith",$startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./$.fails-is-regexp")(STARTS_WITH),"String",{startsWith:function startsWith(searchString){var that=context(this,searchString,STARTS_WITH),$$=arguments,index=toLength(Math.min($$.length>1?$$[1]:undefined,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{"./$.export":25,"./$.fails-is-regexp":26,"./$.string-context":74,"./$.to-length":82}],171:[function(require,module,exports){"use strict";require("./$.string-trim")("trim",function($trim){return function trim(){return $trim(this,3)}})},{"./$.string-trim":77}],172:[function(require,module,exports){"use strict";var $=require("./$"),global=require("./$.global"),has=require("./$.has"),DESCRIPTORS=require("./$.descriptors"),$export=require("./$.export"),redefine=require("./$.redefine"),$fails=require("./$.fails"),shared=require("./$.shared"),setToStringTag=require("./$.set-to-string-tag"),uid=require("./$.uid"),wks=require("./$.wks"),keyOf=require("./$.keyof"),$names=require("./$.get-names"),enumKeys=require("./$.enum-keys"),isArray=require("./$.is-array"),anObject=require("./$.an-object"),toIObject=require("./$.to-iobject"),createDesc=require("./$.property-desc"),getDesc=$.getDesc,setDesc=$.setDesc,_create=$.create,getNames=$names.get,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,setter=false,HIDDEN=wks("_hidden"),isEnum=$.isEnum,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),useNative=typeof $Symbol=="function",ObjectProto=Object.prototype;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(setDesc({},"a",{get:function(){return setDesc(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=getDesc(ObjectProto,key);if(protoDesc)delete ObjectProto[key];setDesc(it,key,D);if(protoDesc&&it!==ObjectProto)setDesc(ObjectProto,key,protoDesc)}:setDesc;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);sym._k=tag;DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:true,set:function(value){if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))}});return sym};var isSymbol=function(it){return typeof it=="symbol"};var $defineProperty=function defineProperty(it,key,D){if(D&&has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))setDesc(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return setDesc(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P)),i=0,l=keys.length,key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key);return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){var D=getDesc(it=toIObject(it),key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN)result.push(key);return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(has(AllSymbols,key=names[i++]))result.push(AllSymbols[key]);return result};var $stringify=function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,$$=arguments,replacer,$replacer;while($$.length>i)args.push($$[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)};var buggyJSON=$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"});if(!useNative){$Symbol=function Symbol(){if(isSymbol(this))throw TypeError("Symbol is not a constructor");return wrap(uid(arguments.length>0?arguments[0]:undefined))};redefine($Symbol.prototype,"toString",function toString(){return this._k});isSymbol=function(it){return it instanceof $Symbol};$.create=$create;$.isEnum=$propertyIsEnumerable;$.getDesc=$getOwnPropertyDescriptor;$.setDesc=$defineProperty;$.setDescs=$defineProperties;$.getNames=$names.get=$getOwnPropertyNames;$.getSymbols=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./$.library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}}var symbolStatics={"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){return keyOf(SymbolRegistry,key)},useSetter:function(){setter=true},useSimple:function(){setter=false}};$.each.call(("hasInstance,isConcatSpreadable,iterator,match,replace,search,"+"species,split,toPrimitive,toStringTag,unscopables").split(","),function(it){var sym=wks(it);symbolStatics[it]=useNative?sym:wrap(sym)});setter=true;$export($export.G+$export.W,{Symbol:$Symbol});$export($export.S,"Symbol",symbolStatics);$export($export.S+$export.F*!useNative,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!useNative||buggyJSON),"JSON",{stringify:$stringify});setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./$":49,"./$.an-object":7,"./$.descriptors":22,"./$.enum-keys":24,"./$.export":25,"./$.fails":27,"./$.get-names":31,"./$.global":32,"./$.has":33,"./$.is-array":39,"./$.keyof":50,"./$.library":51,"./$.property-desc":62,"./$.redefine":64,"./$.set-to-string-tag":69,"./$.shared":70,"./$.to-iobject":81,"./$.uid":85,"./$.wks":86}],173:[function(require,module,exports){"use strict";var $=require("./$"),redefine=require("./$.redefine"),weak=require("./$.collection-weak"),isObject=require("./$.is-object"),has=require("./$.has"),frozenStore=weak.frozenStore,WEAK=weak.WEAK,isExtensible=Object.isExtensible||isObject,tmp={};var $WeakMap=require("./$.collection")("WeakMap",function(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){if(isObject(key)){if(!isExtensible(key))return frozenStore(this).get(key);if(has(key,WEAK))return key[WEAK][this._i]}},set:function set(key,value){return weak.def(this,key,value)}},weak,true,true);if((new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)!=7){$.each.call(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){var result=frozenStore(this)[key](a,b);return key=="set"?this:result}return method.call(this,a,b)})})}},{"./$":49,"./$.collection":18,"./$.collection-weak":17,"./$.has":33,"./$.is-object":41,"./$.redefine":64}],174:[function(require,module,exports){"use strict";var weak=require("./$.collection-weak");require("./$.collection")("WeakSet",function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return weak.def(this,value,true)}},weak,false,true)},{"./$.collection":18,"./$.collection-weak":17}],175:[function(require,module,exports){"use strict";var $export=require("./$.export"),$includes=require("./$.array-includes")(true);$export($export.P,"Array",{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}});require("./$.add-to-unscopables")("includes")},{"./$.add-to-unscopables":6,"./$.array-includes":10,"./$.export":25}],176:[function(require,module,exports){var $export=require("./$.export");$export($export.P,"Map",{toJSON:require("./$.collection-to-json")("Map")})},{"./$.collection-to-json":16,"./$.export":25}],177:[function(require,module,exports){var $export=require("./$.export"),$entries=require("./$.object-to-array")(true);$export($export.S,"Object",{entries:function entries(it){return $entries(it)}})},{"./$.export":25,"./$.object-to-array":58}],178:[function(require,module,exports){var $=require("./$"),$export=require("./$.export"),ownKeys=require("./$.own-keys"),toIObject=require("./$.to-iobject"),createDesc=require("./$.property-desc");$export($export.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=toIObject(object),setDesc=$.setDesc,getDesc=$.getDesc,keys=ownKeys(O),result={},i=0,key,D;while(keys.length>i){D=getDesc(O,key=keys[i++]);if(key in result)setDesc(result,key,createDesc(0,D));else result[key]=D}return result}})},{"./$":49,"./$.export":25,"./$.own-keys":59,"./$.property-desc":62,"./$.to-iobject":81}],179:[function(require,module,exports){var $export=require("./$.export"),$values=require("./$.object-to-array")(false);$export($export.S,"Object",{values:function values(it){return $values(it)}})},{"./$.export":25,"./$.object-to-array":58}],180:[function(require,module,exports){var $export=require("./$.export"),$re=require("./$.replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");$export($export.S,"RegExp",{escape:function escape(it){return $re(it)}})},{"./$.export":25,"./$.replacer":65}],181:[function(require,module,exports){var $export=require("./$.export");$export($export.P,"Set",{toJSON:require("./$.collection-to-json")("Set")})},{"./$.collection-to-json":16,"./$.export":25}],182:[function(require,module,exports){"use strict";var $export=require("./$.export"),$at=require("./$.string-at")(true);$export($export.P,"String",{at:function at(pos){return $at(this,pos)}})},{"./$.export":25,"./$.string-at":73}],183:[function(require,module,exports){"use strict";var $export=require("./$.export"),$pad=require("./$.string-pad");$export($export.P,"String",{padLeft:function padLeft(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,true)}})},{"./$.export":25,"./$.string-pad":75}],184:[function(require,module,exports){"use strict";var $export=require("./$.export"),$pad=require("./$.string-pad");$export($export.P,"String",{padRight:function padRight(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,false)}})},{"./$.export":25,"./$.string-pad":75}],185:[function(require,module,exports){"use strict";require("./$.string-trim")("trimLeft",function($trim){return function trimLeft(){return $trim(this,1)}})},{"./$.string-trim":77}],186:[function(require,module,exports){"use strict";require("./$.string-trim")("trimRight",function($trim){return function trimRight(){return $trim(this,2)}})},{"./$.string-trim":77}],187:[function(require,module,exports){var $=require("./$"),$export=require("./$.export"),$ctx=require("./$.ctx"),$Array=require("./$.core").Array||Array,statics={};var setStatics=function(keys,length){$.each.call(keys.split(","),function(key){if(length==undefined&&key in $Array)statics[key]=$Array[key];else if(key in[])statics[key]=$ctx(Function.call,[][key],length)})};setStatics("pop,reverse,shift,keys,values,entries",1);setStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill");$export($export.S,"Array",statics)},{"./$":49,"./$.core":19,"./$.ctx":20,"./$.export":25}],188:[function(require,module,exports){require("./es6.array.iterator");var global=require("./$.global"),hide=require("./$.hide"),Iterators=require("./$.iterators"),ITERATOR=require("./$.wks")("iterator"),NL=global.NodeList,HTC=global.HTMLCollection,NLProto=NL&&NL.prototype,HTCProto=HTC&&HTC.prototype,ArrayValues=Iterators.NodeList=Iterators.HTMLCollection=Iterators.Array;if(NLProto&&!NLProto[ITERATOR])hide(NLProto,ITERATOR,ArrayValues);if(HTCProto&&!HTCProto[ITERATOR])hide(HTCProto,ITERATOR,ArrayValues)},{"./$.global":32,"./$.hide":34,"./$.iterators":48,"./$.wks":86,"./es6.array.iterator":94}],189:[function(require,module,exports){var $export=require("./$.export"),$task=require("./$.task");$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{"./$.export":25,"./$.task":78}],190:[function(require,module,exports){var global=require("./$.global"),$export=require("./$.export"),invoke=require("./$.invoke"),partial=require("./$.partial"),navigator=global.navigator,MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent);var wrap=function(set){return MSIE?function(fn,time){return set(invoke(partial,[].slice.call(arguments,2),typeof fn=="function"?fn:Function(fn)),time)}:set};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},{"./$.export":25,"./$.global":32,"./$.invoke":36,"./$.partial":60}],191:[function(require,module,exports){require("./modules/es5");require("./modules/es6.symbol");require("./modules/es6.object.assign");require("./modules/es6.object.is");require("./modules/es6.object.set-prototype-of");require("./modules/es6.object.to-string");require("./modules/es6.object.freeze");require("./modules/es6.object.seal");require("./modules/es6.object.prevent-extensions");require("./modules/es6.object.is-frozen");require("./modules/es6.object.is-sealed");require("./modules/es6.object.is-extensible");require("./modules/es6.object.get-own-property-descriptor");require("./modules/es6.object.get-prototype-of");require("./modules/es6.object.keys");require("./modules/es6.object.get-own-property-names");require("./modules/es6.function.name");require("./modules/es6.function.has-instance");require("./modules/es6.number.constructor");require("./modules/es6.number.epsilon");require("./modules/es6.number.is-finite");require("./modules/es6.number.is-integer");require("./modules/es6.number.is-nan");require("./modules/es6.number.is-safe-integer");require("./modules/es6.number.max-safe-integer");require("./modules/es6.number.min-safe-integer");require("./modules/es6.number.parse-float");require("./modules/es6.number.parse-int");require("./modules/es6.math.acosh");require("./modules/es6.math.asinh");require("./modules/es6.math.atanh");require("./modules/es6.math.cbrt");require("./modules/es6.math.clz32");require("./modules/es6.math.cosh");require("./modules/es6.math.expm1");require("./modules/es6.math.fround");require("./modules/es6.math.hypot");require("./modules/es6.math.imul");require("./modules/es6.math.log10");require("./modules/es6.math.log1p");require("./modules/es6.math.log2");require("./modules/es6.math.sign");require("./modules/es6.math.sinh");require("./modules/es6.math.tanh");require("./modules/es6.math.trunc");require("./modules/es6.string.from-code-point");require("./modules/es6.string.raw");require("./modules/es6.string.trim");require("./modules/es6.string.iterator");require("./modules/es6.string.code-point-at");require("./modules/es6.string.ends-with");require("./modules/es6.string.includes");require("./modules/es6.string.repeat");require("./modules/es6.string.starts-with");require("./modules/es6.array.from");require("./modules/es6.array.of");require("./modules/es6.array.iterator");require("./modules/es6.array.species");require("./modules/es6.array.copy-within");require("./modules/es6.array.fill");require("./modules/es6.array.find");require("./modules/es6.array.find-index");require("./modules/es6.regexp.constructor");require("./modules/es6.regexp.flags");require("./modules/es6.regexp.match");require("./modules/es6.regexp.replace");require("./modules/es6.regexp.search");require("./modules/es6.regexp.split");require("./modules/es6.promise");require("./modules/es6.map");require("./modules/es6.set");require("./modules/es6.weak-map");require("./modules/es6.weak-set");require("./modules/es6.reflect.apply");require("./modules/es6.reflect.construct");require("./modules/es6.reflect.define-property");require("./modules/es6.reflect.delete-property");require("./modules/es6.reflect.enumerate");require("./modules/es6.reflect.get");require("./modules/es6.reflect.get-own-property-descriptor");require("./modules/es6.reflect.get-prototype-of");require("./modules/es6.reflect.has");require("./modules/es6.reflect.is-extensible");require("./modules/es6.reflect.own-keys");require("./modules/es6.reflect.prevent-extensions");require("./modules/es6.reflect.set");require("./modules/es6.reflect.set-prototype-of");require("./modules/es7.array.includes");require("./modules/es7.string.at");require("./modules/es7.string.pad-left");require("./modules/es7.string.pad-right");require("./modules/es7.string.trim-left");require("./modules/es7.string.trim-right");require("./modules/es7.regexp.escape");require("./modules/es7.object.get-own-property-descriptors");require("./modules/es7.object.values");require("./modules/es7.object.entries");require("./modules/es7.map.to-json");require("./modules/es7.set.to-json");require("./modules/js.array.statics");require("./modules/web.timers");require("./modules/web.immediate");require("./modules/web.dom.iterable");module.exports=require("./modules/$.core")},{"./modules/$.core":19,"./modules/es5":88,"./modules/es6.array.copy-within":89,"./modules/es6.array.fill":90,"./modules/es6.array.find":92,"./modules/es6.array.find-index":91,"./modules/es6.array.from":93,"./modules/es6.array.iterator":94,"./modules/es6.array.of":95,"./modules/es6.array.species":96,"./modules/es6.function.has-instance":97,"./modules/es6.function.name":98,"./modules/es6.map":99,"./modules/es6.math.acosh":100,"./modules/es6.math.asinh":101,"./modules/es6.math.atanh":102,"./modules/es6.math.cbrt":103,"./modules/es6.math.clz32":104,"./modules/es6.math.cosh":105,"./modules/es6.math.expm1":106,"./modules/es6.math.fround":107,"./modules/es6.math.hypot":108,"./modules/es6.math.imul":109,"./modules/es6.math.log10":110,"./modules/es6.math.log1p":111,"./modules/es6.math.log2":112,"./modules/es6.math.sign":113,"./modules/es6.math.sinh":114,"./modules/es6.math.tanh":115,"./modules/es6.math.trunc":116,"./modules/es6.number.constructor":117,"./modules/es6.number.epsilon":118,"./modules/es6.number.is-finite":119,"./modules/es6.number.is-integer":120,"./modules/es6.number.is-nan":121,"./modules/es6.number.is-safe-integer":122,"./modules/es6.number.max-safe-integer":123,"./modules/es6.number.min-safe-integer":124,"./modules/es6.number.parse-float":125,"./modules/es6.number.parse-int":126,"./modules/es6.object.assign":127,"./modules/es6.object.freeze":128,"./modules/es6.object.get-own-property-descriptor":129,"./modules/es6.object.get-own-property-names":130,"./modules/es6.object.get-prototype-of":131,"./modules/es6.object.is":135,"./modules/es6.object.is-extensible":132,"./modules/es6.object.is-frozen":133,"./modules/es6.object.is-sealed":134,"./modules/es6.object.keys":136,"./modules/es6.object.prevent-extensions":137,"./modules/es6.object.seal":138,"./modules/es6.object.set-prototype-of":139,"./modules/es6.object.to-string":140,"./modules/es6.promise":141,"./modules/es6.reflect.apply":142,"./modules/es6.reflect.construct":143,"./modules/es6.reflect.define-property":144,"./modules/es6.reflect.delete-property":145,"./modules/es6.reflect.enumerate":146,"./modules/es6.reflect.get":149,"./modules/es6.reflect.get-own-property-descriptor":147,"./modules/es6.reflect.get-prototype-of":148,"./modules/es6.reflect.has":150,"./modules/es6.reflect.is-extensible":151,"./modules/es6.reflect.own-keys":152,"./modules/es6.reflect.prevent-extensions":153,"./modules/es6.reflect.set":155,"./modules/es6.reflect.set-prototype-of":154,"./modules/es6.regexp.constructor":156,"./modules/es6.regexp.flags":157,"./modules/es6.regexp.match":158,"./modules/es6.regexp.replace":159,"./modules/es6.regexp.search":160,"./modules/es6.regexp.split":161,"./modules/es6.set":162,"./modules/es6.string.code-point-at":163,"./modules/es6.string.ends-with":164,"./modules/es6.string.from-code-point":165,"./modules/es6.string.includes":166,"./modules/es6.string.iterator":167,"./modules/es6.string.raw":168,"./modules/es6.string.repeat":169,"./modules/es6.string.starts-with":170,"./modules/es6.string.trim":171,"./modules/es6.symbol":172,"./modules/es6.weak-map":173,"./modules/es6.weak-set":174,"./modules/es7.array.includes":175,"./modules/es7.map.to-json":176,"./modules/es7.object.entries":177,"./modules/es7.object.get-own-property-descriptors":178,"./modules/es7.object.values":179,"./modules/es7.regexp.escape":180,"./modules/es7.set.to-json":181,"./modules/es7.string.at":182,"./modules/es7.string.pad-left":183,"./modules/es7.string.pad-right":184,"./modules/es7.string.trim-left":185,"./modules/es7.string.trim-right":186,"./modules/js.array.statics":187,"./modules/web.dom.iterable":188,"./modules/web.immediate":189,"./modules/web.timers":190}],192:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],193:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],194:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined";
}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":193,_process:4,inherits:192}],195:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _utils=require("../utils");var Queue=[];var Fx=function(){function Fx(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Fx);this.opt=(0,_utils.merge)({delay:0,duration:1e3,transition:function transition(x){return x},onCompute:_utils.noop,onComplete:_utils.noop},options)}_createClass(Fx,[{key:"start",value:function start(options){this.opt=(0,_utils.merge)(this.opt,options||{});this.time=Date.now();this.animating=true;Queue.push(this)}},{key:"step",value:function step(){if(!this.animating)return;var currentTime=Date.now(),time=this.time,opt=this.opt,delay=opt.delay,duration=opt.duration,delta=0;if(currentTime<time+delay){opt.onCompute.call(this,delta);return}if(currentTime<time+delay+duration){delta=opt.transition((currentTime-time-delay)/duration);opt.onCompute.call(this,delta)}else{this.animating=false;opt.onCompute.call(this,1);opt.onComplete.call(this)}}}],[{key:"compute",value:function compute(from,to,delta){return from+(to-from)*delta}}]);return Fx}();exports["default"]=Fx;Fx.Queue=Queue;Fx.Transition={linear:function linear(p){return p}};var Trans=Fx.Transition;Fx.prototype.time=null;function makeTrans(transition,params){params=(0,_utils.splat)(params);return Object.assign(transition,{easeIn:function easeIn(pos){return transition(pos,params)},easeOut:function easeOut(pos){return 1-transition(1-pos,params)},easeInOut:function easeInOut(pos){return pos<=.5?transition(2*pos,params)/2:(2-transition(2*(1-pos),params))/2}})}var transitions={Pow:function Pow(p,x){return Math.pow(p,x[0]||6)},Expo:function Expo(p){return Math.pow(2,8*(p-1))},Circ:function Circ(p){return 1-Math.sin(Math.acos(p))},Sine:function Sine(p){return 1-Math.sin((1-p)*Math.PI/2)},Back:function Back(p,x){x=x[0]||1.618;return Math.pow(p,2)*((x+1)*p-x)},Bounce:function Bounce(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-Math.pow((11-6*a-11*p)/4,2);break}}return value},Elastic:function Elastic(p,x){return Math.pow(2,10*--p)*Math.cos(20*p*Math.PI*(x[0]||1)/3)}};for(var t in transitions){Trans[t]=makeTrans(transitions[t])}["Quad","Cubic","Quart","Quint"].forEach(function(elem,i){Trans[elem]=makeTrans(function(p){return Math.pow(p,[i+2])})});var global;try{global=window}catch(e){global=null}var checkFxQueue=function checkFxQueue(){var oldQueue=Queue;Queue=[];if(oldQueue.length){for(var i=0,l=oldQueue.length,fx;i<l;i++){fx=oldQueue[i];fx.step();if(fx.animating){Queue.push(fx)}}Fx.Queue=Queue}};if(global){var found=false;["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"].forEach(function(impl){if(impl in global){Fx.animationTime=function(){return global[impl]};found=true}});if(!found){Fx.animationTime=Date.now}found=false;["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"].forEach(function(impl){if(impl in global){Fx.requestAnimationFrame=function(callback){global[impl](function(){checkFxQueue();callback()})};found=true}});if(!found){Fx.requestAnimationFrame=function(callback){setTimeout(function(){checkFxQueue();callback()},1e3/60)}}}module.exports=exports["default"]},{"../utils":219}],196:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var WorkerGroup=function(){function WorkerGroup(fileName,n){_classCallCheck(this,WorkerGroup);var workers=this.workers=[];while(n--){workers.push(new Worker(fileName))}}_createClass(WorkerGroup,[{key:"map",value:function map(callback){var workers=this.workers;var configs=this.configs=[];for(var i=0,l=workers.length;i<l;i++){configs.push(callback&&callback(i))}return this}},{key:"reduce",value:function reduce(opt){var fn=opt.reduceFn,workers=this.workers,configs=this.configs,l=workers.length,acum=opt.initialValue,message=function message(e){l--;if(acum===undefined){acum=e.data}else{acum=fn(acum,e.data)}if(l==0){opt.onComplete(acum)}};for(var i=0,ln=l;i<ln;i++){var w=workers[i];w.onmessage=message;w.postMessage(configs[i])}return this}}]);return WorkerGroup}();exports["default"]=WorkerGroup;module.exports=exports["default"]},{}],197:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Buffer=function(){function Buffer(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Buffer);this.gl=gl;this._setOpts(opts);this.buffer=gl.createBuffer();this._bufferData()}_createClass(Buffer,[{key:"update",value:function update(){var opts=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this._setOpts(opts);this._bufferData()}},{key:"_setOpts",value:function _setOpts(opts){opts=_extends({data:this.data,attribute:this.attribute,bufferType:this.bufferType===undefined?this.gl.ARRAY_BUFFER:this.bufferType,size:this.size===undefined?1:this.size,dataType:this.dataType===undefined?this.gl.FLOAT:this.dataType,stride:this.stride===undefined?0:this.stride,offset:this.offset===undefined?0:this.offset,drawType:this.drawType===undefined?this.gl.STATIC_DRAW:this.drawType,instanced:this.instanced===undefined?0:this.instanced},opts);this.data=opts.data;this.attribute=opts.attribute;this.bufferType=opts.bufferType;this.size=opts.size,this.dataType=opts.dataType;this.stride=opts.stride;this.offset=opts.offset;this.drawType=opts.drawType;this.instanced=opts.instanced}},{key:"_bufferData",value:function _bufferData(){if(this.data!==undefined){this.gl.bindBuffer(this.bufferType,this.buffer);this.gl.bufferData(this.bufferType,this.data,this.drawType);this.gl.bindBuffer(this.bufferType,null)}}}]);return Buffer}();exports["default"]=Buffer;module.exports=exports["default"]},{}],198:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var _index=require("./index");var LumaGL=_interopRequireWildcard(_index);var _addonsFx=require("./addons/fx");var _addonsFx2=_interopRequireDefault(_addonsFx);var _addonsWorkers=require("./addons/workers");var _addonsWorkers2=_interopRequireDefault(_addonsWorkers);try{require("babel-polyfill")}catch(e){console.warn("Already have an instance of babel-polyfill.")}if(typeof window!=="undefined"){window.LumaGL={hasWebGL:LumaGL.hasWebGL,createGLContext:LumaGL.createGLContext,loadTextures:LumaGL.loadTextures,Model:LumaGL.Model,Cone:LumaGL.Cone,Cube:LumaGL.Cube,Cylinder:LumaGL.Cylinder,IcoSphere:LumaGL.IcoSphere,Plane:LumaGL.Plane,Sphere:LumaGL.Sphere,TruncatedCone:LumaGL.TruncatedCone,Framebuffer:LumaGL.Framebuffer,Texture2D:LumaGL.Texture2D,TextureCube:LumaGL.TextureCube,Buffer:LumaGL.Buffer,Events:LumaGL.Events,Mat4:LumaGL.Mat4,Vec3:LumaGL.Vec3,Shaders:LumaGL.Shaders,PerspectiveCamera:LumaGL.PerspectiveCamera,OrthoCamera:LumaGL.OrthoCamera,Scene:LumaGL.Scene,Program:LumaGL.Program,Media:{Image:LumaGL.Img},IO:{XHR:LumaGL.XHR},WorkerGroup:_addonsWorkers2["default"],Fx:_addonsFx2["default"]}}},{"./addons/fx":195,"./addons/workers":196,"./index":202,"babel-polyfill":2}],199:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _math=require("./math");var _utils=require("./utils");var Camera=function(){function Camera(opts){_classCallCheck(this,Camera);opts=(0,_utils.merge)({fov:45,near:.1,far:500,aspect:1,position:new _math.Vec3(0,0,0),target:new _math.Vec3(0,0,-1),up:new _math.Vec3(0,1,0)},opts);this.fov=opts.fov;this.near=opts.near;this.far=opts.far;this.aspect=opts.aspect;this.position=opts.position;this.target=opts.target;this.up=opts.up;this.view=new _math.Mat4;this.update()}_createClass(Camera,[{key:"setStatus",value:function setStatus(program){var pos=this.position;var viewProjection=this.view.mulMat4(this.projection);var viewProjectionInverse=viewProjection.invert();program.setUniforms({cameraPosition:[pos.x,pos.y,pos.z],projectionMatrix:this.projection,viewMatrix:this.view,viewProjectionMatrix:viewProjection,viewInverseMatrix:this.view.invert(),viewProjectionInverseMatrix:viewProjectionInverse})}}]);return Camera}();var PerspectiveCamera=function(_Camera){_inherits(PerspectiveCamera,_Camera);function PerspectiveCamera(){_classCallCheck(this,PerspectiveCamera);_get(Object.getPrototypeOf(PerspectiveCamera.prototype),"constructor",this).apply(this,arguments)}_createClass(PerspectiveCamera,[{key:"update",value:function update(){this.projection=(new _math.Mat4).perspective(this.fov,this.aspect,this.near,this.far);this.view.lookAt(this.position,this.target,this.up)}}]);return PerspectiveCamera}(Camera);exports.PerspectiveCamera=PerspectiveCamera;var OrthoCamera=function(){function OrthoCamera(){_classCallCheck(this,OrthoCamera)}_createClass(OrthoCamera,[{key:"update",value:function update(){var ymax=this.near*Math.tan(this.fov*Math.PI/360);var ymin=-ymax;var xmin=ymin*this.aspect;var xmax=ymax*this.aspect;this.projection=(new _math.Mat4).ortho(xmin,xmax,ymin,ymax,this.near,this.far);this.view.lookAt(this.position,this.target,this.up)}}]);return OrthoCamera}();exports.OrthoCamera=OrthoCamera},{"./math":205,"./utils":219}],200:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.get=get;exports.getWheel=getWheel;exports.getKey=getKey;exports.isRightClick=isRightClick;exports.getPos=getPos;exports.stop=_stop;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _utils=require("./utils");function toO3D(n){return n!==true?n:false}function _getPos(elem){var bbox=elem.getBoundingClientRect();return{x:bbox.left,y:bbox.top,bbox:bbox}}function get(e,win){win=win||window;return e||win.event}function getWheel(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function getKey(e){var code=e.which||e.keyCode;var key=keyOf(code);var fKey=code-111;if(fKey>0&&fKey<13){key="f"+fKey}key=key||String.fromCharCode(code).toLowerCase();return{code:code,key:key,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function isRightClick(e){return e.which===3||e.button===2}function getPos(e,win){win=win||window;e=e||win.event;var doc=win.document;doc=doc.documentElement||doc.body;if(e.touches&&e.touches.length){var touchesPos=[];for(var i=0,l=e.touches.length,evt;i<l;++i){evt=e.touches[i];touchesPos.push({x:evt.pageX||evt.clientX+doc.scrollLeft,y:evt.pageY||evt.clientY+doc.scrollTop})}return touchesPos}var page={x:e.pageX||e.clientX+doc.scrollLeft,y:e.pageY||e.clientY+doc.scrollTop};return[page]}function _stop(e){if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}var EventsProxy=function(){function EventsProxy(domElem,opt){_classCallCheck(this,EventsProxy);this.scene=opt.scene;this.domElem=domElem;this.pos=_getPos(domElem);this.opt=this.callbacks=opt;this.size={width:domElem.width||domElem.offsetWidth,height:domElem.height||domElem.offsetHeight};this.attachEvents()}_createClass(EventsProxy,[{key:"attachEvents",value:function attachEvents(){var domElem=this.domElem;var opt=this.opt;var self=this;if(opt.disableContextMenu){domElem.oncontextmenu=function(){return false}}if(opt.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(action){domElem.addEventListener(action,function(e,win){self[action](self.eventInfo(action,e,win))},false)});var type="";if(!document.getBoxObjectFor&&window.mozInnerScreenX==null){type="mousewheel"}else{type="DOMMouseScroll"}domElem.addEventListener(type,function(e,win){self["mousewheel"](self.eventInfo("mousewheel",e,win))},false)}if(opt.enableTouch){["touchstart","touchmove","touchend"].forEach(function(action){domElem.addEventListener(action,function(e,win){self[action](self.eventInfo(action,e,win))},false)})}if(opt.enableKeyboard){["keydown","keyup"].forEach(function(action){document.addEventListener(action,function(e,win){self[action](self.eventInfo(action,e,win))},false)})}}},{key:"eventInfo",value:function eventInfo(type,e,win){var domElem=this.domElem;var scene=this.scene;var opt=this.opt;var size=this.getSize();var relative=opt.relative;var centerOrigin=opt.centerOrigin;var pos=opt.cachePosition&&this.pos||_getPos(domElem);var ge=get(e,win);var epos=getPos(e,win);var origPos={x:epos[0].x,y:epos[0].y};var evt={};var x=undefined;var y=undefined;for(var i=0,l=epos.length;i<l;++i){x=epos[i].x;y=epos[i].y;if(relative){x-=pos.x;y-=pos.y;if(centerOrigin){x-=size.width/2;y-=size.height/2;y*=-1}}epos[i].x=x;epos[i].y=y}switch(type){case"mousewheel":evt.wheel=getWheel(ge);break;case"keydown":case"keyup":Object.assign(evt,getKey(ge));break;case"mouseup":evt.isRightClick=isRightClick(ge);break;default:break}var cacheTarget;Object.assign(evt,{x:epos[0].x,y:epos[0].y,posArray:epos,cache:false,stop:function stop(){_stop(ge)},getTarget:function getTarget(){if(cacheTarget){return cacheTarget}return cacheTarget=opt.picking&&scene.pick(origPos.x-pos.x,origPos.y-pos.y)||true}});evt.event=ge;return evt}},{key:"getSize",value:function getSize(){if(this.cacheSize){return this.size}var domElem=this.domElem;return{width:domElem.width||domElem.offsetWidth,height:domElem.height||domElem.offsetHeight}}},{key:"mouseup",value:function mouseup(e){if(!this.moved){if(e.isRightClick){this.callbacks.onRightClick(e,this.hovered)}else{this.callbacks.onClick(e,toO3D(this.pressed))}}if(this.pressed){if(this.moved){this.callbacks.onDragEnd(e,toO3D(this.pressed))}else{this.callbacks.onDragCancel(e,toO3D(this.pressed))}this.pressed=this.moved=false}}},{key:"mouseout",value:function mouseout(e){var rt=e.relatedTarget;var domElem=this.domElem;while(rt&&rt.parentNode){if(domElem===rt.parentNode){return}rt=rt.parentNode}if(this.hovered){this.callbacks.onMouseLeave(e,this.hovered);this.hovered=false}if(this.pressed&&this.moved){this.callbacks.onDragEnd(e);this.pressed=this.moved=false}}},{key:"mouseover",value:function mouseover(e){}},{key:"mousemove",value:function mousemove(e){if(this.pressed){this.moved=true;this.callbacks.onDragMove(e,toO3D(this.pressed));return}if(this.hovered){var target=toO3D(e.getTarget());if(!target||target.hash!==this.hash){this.callbacks.onMouseLeave(e,this.hovered);this.hovered=target;this.hash=target;if(target){this.hash=target.hash;this.callbacks.onMouseEnter(e,this.hovered)}}else{this.callbacks.onMouseMove(e,this.hovered)}}else{this.hovered=toO3D(e.getTarget());this.hash=this.hovered;if(this.hovered){this.hash=this.hovered.hash;this.callbacks.onMouseEnter(e,this.hovered)}}if(!this.opt.picking){this.callbacks.onMouseMove(e)}}},{key:"mousewheel",value:function mousewheel(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function mousedown(e){this.pressed=e.getTarget();this.callbacks.onDragStart(e,toO3D(this.pressed))}},{key:"touchstart",value:function touchstart(e){this.touched=e.getTarget();this.touchedLastPosition={x:e.x,y:e.y};this.callbacks.onTouchStart(e,toO3D(this.touched))}},{key:"touchmove",value:function touchmove(e){if(this.touched){this.touchMoved=true;this.callbacks.onTouchMove(e,toO3D(this.touched))}}},{key:"touchend",value:function touchend(e){if(this.touched){if(this.touchMoved){this.callbacks.onTouchEnd(e,toO3D(this.touched))}else{e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x;e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y;this.callbacks.onTap(e,toO3D(this.touched));this.callbacks.onTouchCancel(e,toO3D(this.touched))}this.touched=this.touchMoved=false}}},{key:"keydown",value:function keydown(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function keyup(e){this.callbacks.onKeyUp(e)}}]);return EventsProxy}();exports.EventsProxy=EventsProxy;Object.assign(EventsProxy.prototype,{hovered:false,pressed:false,touched:false,touchedLastPosition:{x:0,y:0},touchMoved:false,moved:false});var Events={create:function create(gl){var opt=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];opt=_extends({cachePosition:true,cacheSize:true,relative:true,centerOrigin:true,disableContextMenu:true,bind:false,picking:false,lazyPicking:false,enableTouch:true,enableMouse:true,enableKeyboard:true,onClick:_utils.noop,onRightClick:_utils.noop,onDragStart:_utils.noop,onDragMove:_utils.noop,onDragEnd:_utils.noop,onDragCancel:_utils.noop,onTouchStart:_utils.noop,onTouchMove:_utils.noop,onTouchEnd:_utils.noop,onTouchCancel:_utils.noop,onTap:_utils.noop,onMouseMove:_utils.noop,onMouseEnter:_utils.noop,onMouseLeave:_utils.noop,onMouseWheel:_utils.noop,onKeyDown:_utils.noop,onKeyUp:_utils.noop},opt);var bind=opt.bind;if(bind){for(var _name in opt){if(_name.match(/^on[a-zA-Z0-9]+$/)){(function(name,fn){opt[name]=function(){fn.apply(bind,Array.prototype.slice.call(arguments))}})(_name,opt[_name])}}}new EventsProxy(gl,opt)}};exports.Events=Events;Events.Keys={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,"delete":46};function keyOf(code){var keyMap=Events.Keys;for(var name in keyMap){if(keyMap[name]===code){return name}}}},{"./utils":219}],201:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _texture=require("./texture");var Framebuffer=function(){function Framebuffer(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Framebuffer);this.gl=gl;this.width=opts.width?opts.width:1;this.height=opts.height?opts.height:1;this.depth=opts.depth===undefined?true:opts.depth;this.minFilter=opts.minFilter||gl.NEAREST;this.magFilter=opts.magFilter||gl.NEAREST;this.fbo=gl.createFramebuffer();this.bind();this.texture=new _texture.Texture2D(gl,{width:this.width,height:this.height,minFilter:this.minFilter,magFilter:this.magFilter});gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture.texture,0);if(this.depth){this.depth=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this.depth);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,this.width,this.height);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,this.depth)}var status=gl.checkFramebufferStatus(gl.FRAMEBUFFER);if(status!==gl.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer creation failed.")}gl.bindRenderbuffer(gl.RENDERBUFFER,null);gl.bindFramebuffer(gl.FRAMEBUFFER,null)}_createClass(Framebuffer,[{key:"bind",value:function bind(){var gl=this.gl;gl.bindFramebuffer(gl.FRAMEBUFFER,this.fbo)}}]);return Framebuffer}();exports["default"]=Framebuffer;module.exports=exports["default"]},{"./texture":218}],202:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequire(obj){return obj&&obj.__esModule?obj["default"]:obj}function _interopExportWildcard(obj,defaults){var newObj=defaults({},obj);delete newObj["default"];return newObj}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}var _webgl=require("./webgl");_defaults(exports,_interopExportWildcard(_webgl,_defaults));var _math=require("./math");_defaults(exports,_interopExportWildcard(_math,_defaults));var _event=require("./event");Object.defineProperty(exports,"Events",{enumerable:true,get:function get(){return _event.Events}});var _program=require("./program");exports.Program=_interopRequire(_program);var _io=require("./io");_defaults(exports,_interopExportWildcard(_io,_defaults));var _camera=require("./camera");_defaults(exports,_interopExportWildcard(_camera,_defaults));var _objectsModel=require("./objects/model");exports.Model=_interopRequire(_objectsModel);var _objectsCone=require("./objects/cone");exports.Cone=_interopRequire(_objectsCone);var _objectsCube=require("./objects/cube");exports.Cube=_interopRequire(_objectsCube);var _objectsCylinder=require("./objects/cylinder");exports.Cylinder=_interopRequire(_objectsCylinder);var _objectsIcoSphere=require("./objects/ico-sphere");exports.IcoSphere=_interopRequire(_objectsIcoSphere);var _objectsPlane=require("./objects/plane");exports.Plane=_interopRequire(_objectsPlane);var _objectsSphere=require("./objects/sphere");exports.Sphere=_interopRequire(_objectsSphere);exports.TruncatedCone=_interopRequire(_objectsCone);var _shaders=require("./shaders");exports.Shaders=_interopRequire(_shaders);var _scene=require("./scene");exports.Scene=_interopRequire(_scene);var _media=require("./media");_defaults(exports,_interopExportWildcard(_media,_defaults));var _buffer=require("./buffer");exports.Buffer=_interopRequire(_buffer);var _fbo=require("./fbo");exports.Framebuffer=_interopRequire(_fbo);var _texture=require("./texture");Object.defineProperty(exports,"Texture2D",{enumerable:true,get:function get(){return _texture.Texture2D}});Object.defineProperty(exports,"TextureCube",{enumerable:true,get:function get(){return _texture.TextureCube}})},{"./buffer":197,"./camera":199,"./event":200,"./fbo":201,"./io":203,"./math":205,"./media":206,"./objects/cone":207,"./objects/cube":208,"./objects/cylinder":209,"./objects/ico-sphere":210,"./objects/model":211,"./objects/plane":212,"./objects/sphere":213,"./program":215,"./scene":216,"./shaders":217,"./texture":218,"./webgl":220}],203:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.JSONP=JSONP;exports.loadTextures=loadTextures;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _utils=require("./utils");var _media=require("./media");var _media2=_interopRequireDefault(_media);var _textureJs=require("./texture.js");var XHR=function(){function XHR(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,XHR);opt=_extends({url:"http:// philogljs.org/",method:"GET",async:true,noCache:false,sendAsBinary:false,responseType:false,onProgress:_utils.noop,onSuccess:_utils.noop,onError:_utils.noop,onAbort:_utils.noop,onComplete:_utils.noop},opt);this.opt=opt;this.initXHR()}_createClass(XHR,[{key:"initXHR",value:function initXHR(){var req=this.req=new XMLHttpRequest;var self=this;["Progress","Error","Abort","Load"].forEach(function(event){if(req.addEventListener){req.addEventListener(event.toLowerCase(),function(e){self["handle"+event](e)},false)}else{req["on"+event.toLowerCase()]=function(e){self["handle"+event](e)}}})}},{key:"sendAsync",value:function sendAsync(body){var _this=this;return new Promise(function(resolve,reject){var req=_this.req;var opt=_this.opt;var async=opt.async;if(opt.noCache){opt.url+=(opt.url.indexOf("?")>=0?"&":"?")+(0,_utils.uid)()}req.open(opt.method,opt.url,async);if(opt.responseType){req.responseType=opt.responseType}if(async){req.onreadystatechange=function(e){if(req.readyState===XHR.State.COMPLETED){if(req.status===200){resolve(req.responseType?req.response:req.responseText)}else{reject(new Error(req.status))}}}}if(opt.sendAsBinary){req.sendAsBinary(body||opt.body||null)}else{req.send(body||opt.body||null)}if(!async){if(req.status===200){resolve(req.responseType?req.response:req.responseText)}else{reject(new Error(req.status))}}})}},{key:"send",value:function send(body){var req=this.req;var opt=this.opt;var async=opt.async;if(opt.noCache){opt.url+=(opt.url.indexOf("?")>=0?"&":"?")+(0,_utils.uid)()}req.open(opt.method,opt.url,async);if(opt.responseType){req.responseType=opt.responseType}if(async){req.onreadystatechange=function(e){if(req.readyState===XHR.State.COMPLETED){if(req.status===200){opt.onSuccess(req.responseType?req.response:req.responseText)}else{opt.onError(req.status)}}}}if(opt.sendAsBinary){req.sendAsBinary(body||opt.body||null)}else{req.send(body||opt.body||null)}if(!async){if(req.status===200){opt.onSuccess(req.responseType?req.response:req.responseText)}else{opt.onError(req.status)}}}},{key:"setRequestHeader",value:function setRequestHeader(header,value){this.req.setRequestHeader(header,value);return this}},{key:"handleProgress",value:function handleProgress(e){if(e.lengthComputable){this.opt.onProgress(e,Math.round(e.loaded/e.total*100))}else{this.opt.onProgress(e,-1)}}},{key:"handleError",value:function handleError(e){this.opt.onError(e)}},{key:"handleAbort",value:function handleAbort(e){this.opt.onAbort(e)}},{key:"handleLoad",value:function handleLoad(e){this.opt.onComplete(e)}}]);return XHR}();exports.XHR=XHR;XHR.State={};["UNINITIALIZED","LOADING","LOADED","INTERACTIVE","COMPLETED"].forEach(function(stateName,i){XHR.State[stateName]=i});var XHRGroup=function(){function XHRGroup(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];
_classCallCheck(this,XHRGroup);opt=_extends({urls:[],onSuccess:_utils.noop,method:"GET",async:true,noCache:false,sendAsBinary:false,responseType:false},opt);var urls=(0,_utils.splat)(opt.urls);this.reqs=urls.map(function(url,i){return new XHR({url:url,method:opt.method,async:opt.async,noCache:opt.noCache,sendAsBinary:opt.sendAsBinary,responseType:opt.responseType,body:opt.body})})}_createClass(XHRGroup,[{key:"sendAsync",value:function sendAsync(){return regeneratorRuntime.async(function sendAsync$(context$2$0){while(1)switch(context$2$0.prev=context$2$0.next){case 0:context$2$0.next=2;return regeneratorRuntime.awrap(Promise.all(this.reqs.map(function(req){return req.sendAsync()})));case 2:return context$2$0.abrupt("return",context$2$0.sent);case 3:case"end":return context$2$0.stop()}},null,this)}}]);return XHRGroup}();exports.XHRGroup=XHRGroup;function JSONP(opt){opt=(0,_utils.merge)({url:"http:// philogljs.org/",data:{},noCache:false,onComplete:_utils.noop,callbackKey:"callback"},opt||{});var index=JSONP.counter++;var data=[];for(var prop in opt.data){data.push(prop+"="+opt.data[prop])}data=data.join("&");if(opt.noCache){data+=(data.indexOf("?")>=0?"&":"?")+(0,_utils.uid)()}var src=opt.url+(opt.url.indexOf("?")>-1?"&":"?")+opt.callbackKey+"=PhiloGL IO.JSONP.requests.request_"+index+(data.length>0?"&"+data:"");var script=document.createElement("script");script.type="text/javascript";script.src=src;JSONP.requests["request_"+index]=function(json){opt.onComplete(json);if(script.parentNode){script.parentNode.removeChild(script)}if(script.clearAttributes){script.clearAttributes()}};document.getElementsByTagName("head")[0].appendChild(script)}JSONP.counter=0;JSONP.requests={};function loadImage(src){return new Promise(function(resolve,reject){var image=new Image;image.onload=function(){resolve(image)};image.onerror=function(){reject(new Error("Could not load image "+src+"."))};image.src=src})}function loadImages(srcs){var imagePromises,results,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,imagePromise;return regeneratorRuntime.async(function loadImages$(context$1$0){while(1)switch(context$1$0.prev=context$1$0.next){case 0:imagePromises=srcs.map(function(src){return loadImage(src)});results=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;context$1$0.prev=5;_iterator=imagePromises[Symbol.iterator]();case 7:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){context$1$0.next=17;break}imagePromise=_step.value;context$1$0.t0=results;context$1$0.next=12;return regeneratorRuntime.awrap(imagePromise);case 12:context$1$0.t1=context$1$0.sent;context$1$0.t0.push.call(context$1$0.t0,context$1$0.t1);case 14:_iteratorNormalCompletion=true;context$1$0.next=7;break;case 17:context$1$0.next=23;break;case 19:context$1$0.prev=19;context$1$0.t2=context$1$0["catch"](5);_didIteratorError=true;_iteratorError=context$1$0.t2;case 23:context$1$0.prev=23;context$1$0.prev=24;if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}case 26:context$1$0.prev=26;if(!_didIteratorError){context$1$0.next=29;break}throw _iteratorError;case 29:return context$1$0.finish(26);case 30:return context$1$0.finish(23);case 31:return context$1$0.abrupt("return",results);case 32:case"end":return context$1$0.stop()}},null,this,[[5,19,23,31],[24,,26,30]])}function loadTextures(gl,opt){var images,textures;return regeneratorRuntime.async(function loadTextures$(context$1$0){while(1)switch(context$1$0.prev=context$1$0.next){case 0:context$1$0.next=2;return regeneratorRuntime.awrap(loadImages(opt.src));case 2:images=context$1$0.sent;textures=[];images.forEach(function(img,i){var params=Array.isArray(opt.parameters)?opt.parameters[i]:opt.parameters;params=params===undefined?{}:params;textures.push(new _textureJs.Texture2D(gl,(0,_utils.merge)({data:img},params)))});return context$1$0.abrupt("return",textures);case 6:case"end":return context$1$0.stop()}},null,this)}},{"./media":206,"./texture.js":218,"./utils":219}],204:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x4,_x5,_x6){var _again=true;_function:while(_again){var object=_x4,property=_x5,receiver=_x6;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x4=parent;_x5=property;_x6=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var sqrt=Math.sqrt;var sin=Math.sin;var cos=Math.cos;var tan=Math.tan;var pi=Math.PI;var slice=Array.prototype.slice;var Vec3=function(_Array){_inherits(Vec3,_Array);function Vec3(){var x=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var y=arguments.length<=1||arguments[1]===undefined?0:arguments[1];var z=arguments.length<=2||arguments[2]===undefined?0:arguments[2];_classCallCheck(this,Vec3);_get(Object.getPrototypeOf(Vec3.prototype),"constructor",this).call(this,3);this[0]=x;this[1]=y;this[2]=z}_createClass(Vec3,[{key:"x",get:function get(){return this[0]},set:function set(value){return this[0]=value}},{key:"y",get:function get(){return this[1]},set:function set(value){return this[1]=value}},{key:"z",get:function get(){return this[2]},set:function set(value){return this[2]=value}}],[{key:"create",value:function create(){return new Vec3(3)}}]);return Vec3}(Array);exports.Vec3=Vec3;var generics={setVec3:function setVec3(dest,vec){dest[0]=vec[0];dest[1]=vec[1];dest[2]=vec[2];return dest},set:function set(dest,x,y,z){dest[0]=x;dest[1]=y;dest[2]=z;return dest},add:function add(dest,vec){return new Vec3(dest[0]+vec[0],dest[1]+vec[1],dest[2]+vec[2])},$add:function $add(dest,vec){dest[0]+=vec[0];dest[1]+=vec[1];dest[2]+=vec[2];return dest},add2:function add2(dest,a,b){dest[0]=a[0]+b[0];dest[1]=a[1]+b[1];dest[2]=a[2]+b[2];return dest},sub:function sub(dest,vec){return new Vec3(dest[0]-vec[0],dest[1]-vec[1],dest[2]-vec[2])},$sub:function $sub(dest,vec){dest[0]-=vec[0];dest[1]-=vec[1];dest[2]-=vec[2];return dest},sub2:function sub2(dest,a,b){dest[0]=a[0]-b[0];dest[1]=a[1]-b[1];dest[2]=a[2]-b[2];return dest},scale:function scale(dest,s){return new Vec3(dest[0]*s,dest[1]*s,dest[2]*s)},$scale:function $scale(dest,s){dest[0]*=s;dest[1]*=s;dest[2]*=s;return dest},neg:function neg(dest){return new Vec3(-dest[0],-dest[1],-dest[2])},$neg:function $neg(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];return dest},unit:function unit(dest){var len=Vec3.norm(dest);if(len>0){return Vec3.scale(dest,1/len)}return Vec3.clone(dest)},$unit:function $unit(dest){var len=Vec3.norm(dest);if(len>0){return Vec3.$scale(dest,1/len)}return dest},cross:function cross(dest,vec){var dx=dest[0],dy=dest[1],dz=dest[2],vx=vec[0],vy=vec[1],vz=vec[2];return new Vec3(dy*vz-dz*vy,dz*vx-dx*vz,dx*vy-dy*vx)},$cross:function $cross(dest,vec){var dx=dest[0],dy=dest[1],dz=dest[2],vx=vec[0],vy=vec[1],vz=vec[2];dest[0]=dy*vz-dz*vy;dest[1]=dz*vx-dx*vz;dest[2]=dx*vy-dy*vx;return dest},distTo:function distTo(dest,vec){var dx=dest[0]-vec[0],dy=dest[1]-vec[1],dz=dest[2]-vec[2];return sqrt(dx*dx+dy*dy+dz*dz)},distToSq:function distToSq(dest,vec){var dx=dest[0]-vec[0],dy=dest[1]-vec[1],dz=dest[2]-vec[2];return dx*dx+dy*dy+dz*dz},norm:function norm(dest){var dx=dest[0],dy=dest[1],dz=dest[2];return sqrt(dx*dx+dy*dy+dz*dz)},normSq:function normSq(dest){var dx=dest[0],dy=dest[1],dz=dest[2];return dx*dx+dy*dy+dz*dz},dot:function dot(dest,vec){return dest[0]*vec[0]+dest[1]*vec[1]+dest[2]*vec[2]},clone:function clone(dest){if(dest instanceof Vec3){return new Vec3(dest[0],dest[1],dest[2])}else{return Vec3.setVec3(new Float32Array(3),dest)}},toFloat32Array:function toFloat32Array(dest){var ans=dest.typedContainer;if(!ans)return dest;ans[0]=dest[0];ans[1]=dest[1];ans[2]=dest[2];return ans}};var proto=Vec3.prototype;for(var method in generics){Vec3[method]=generics[method];proto[method]=function(m){return function(){var args=slice.call(arguments);args.unshift(this);return Vec3[m].apply(Vec3,args)}}(method)}var Mat4=function(_Array2){_inherits(Mat4,_Array2);function Mat4(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){_classCallCheck(this,Mat4);_get(Object.getPrototypeOf(Mat4.prototype),"constructor",this).call(this,16);this.length=16;if(typeof n11==="number"){this.set(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44)}else{this.id()}this.typedContainer=new Float32Array(16)}_createClass(Mat4,[{key:"n11",get:function get(){return this[0]},set:function set(val){this[0]=val}},{key:"n12",get:function get(){return this[4]},set:function set(val){this[4]=val}},{key:"n13",get:function get(){return this[8]},set:function set(val){this[8]=val}},{key:"n14",get:function get(){return this[12]},set:function set(val){this[12]=val}},{key:"n21",get:function get(){return this[1]},set:function set(val){this[1]=val}},{key:"n22",get:function get(){return this[5]},set:function set(val){this[5]=val}},{key:"n23",get:function get(){return this[9]},set:function set(val){this[9]=val}},{key:"n24",get:function get(){return this[13]},set:function set(val){this[13]=val}},{key:"n31",get:function get(){return this[2]},set:function set(val){this[2]=val}},{key:"n32",get:function get(){return this[6]},set:function set(val){this[6]=val}},{key:"n33",get:function get(){return this[10]},set:function set(val){this[10]=val}},{key:"n34",get:function get(){return this[14]},set:function set(val){this[14]=val}},{key:"n41",get:function get(){return this[3]},set:function set(val){this[3]=val}},{key:"n42",get:function get(){return this[7]},set:function set(val){this[7]=val}},{key:"n43",get:function get(){return this[11]},set:function set(val){this[11]=val}},{key:"n44",get:function get(){return this[15]},set:function set(val){this[15]=val}}],[{key:"create",value:function create(){return new Array(16)}}]);return Mat4}(Array);exports.Mat4=Mat4;generics={id:function id(dest){dest[0]=1;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=1;dest[6]=0;dest[7]=0;dest[8]=0;dest[9]=0;dest[10]=1;dest[11]=0;dest[12]=0;dest[13]=0;dest[14]=0;dest[15]=1;return dest},clone:function clone(dest){if(dest instanceof Mat4){return new Mat4(dest[0],dest[4],dest[8],dest[12],dest[1],dest[5],dest[9],dest[13],dest[2],dest[6],dest[10],dest[14],dest[3],dest[7],dest[11],dest[15])}else{return new typedArray(dest)}},set:function set(dest,n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){dest[0]=n11;dest[4]=n12;dest[8]=n13;dest[12]=n14;dest[1]=n21;dest[5]=n22;dest[9]=n23;dest[13]=n24;dest[2]=n31;dest[6]=n32;dest[10]=n33;dest[14]=n34;dest[3]=n41;dest[7]=n42;dest[11]=n43;dest[15]=n44;return dest},mulVec3:function mulVec3(dest,vec){var ans=Vec3.clone(vec);return Mat4.$mulVec3(dest,ans)},$mulVec3:function $mulVec3(dest,vec){var vx=vec[0],vy=vec[1],vz=vec[2],d=1/(dest[3]*vx+dest[7]*vy+dest[11]*vz+dest[15]);vec[0]=(dest[0]*vx+dest[4]*vy+dest[8]*vz+dest[12])*d;vec[1]=(dest[1]*vx+dest[5]*vy+dest[9]*vz+dest[13])*d;vec[2]=(dest[2]*vx+dest[6]*vy+dest[10]*vz+dest[14])*d;return vec},mulMat42:function mulMat42(dest,a,b){var a11=a[0],a12=a[1],a13=a[2],a14=a[3],a21=a[4],a22=a[5],a23=a[6],a24=a[7],a31=a[8],a32=a[9],a33=a[10],a34=a[11],a41=a[12],a42=a[13],a43=a[14],a44=a[15],b11=b[0],b12=b[1],b13=b[2],b14=b[3],b21=b[4],b22=b[5],b23=b[6],b24=b[7],b31=b[8],b32=b[9],b33=b[10],b34=b[11],b41=b[12],b42=b[13],b43=b[14],b44=b[15];dest[0]=b11*a11+b12*a21+b13*a31+b14*a41;dest[1]=b11*a12+b12*a22+b13*a32+b14*a42;dest[2]=b11*a13+b12*a23+b13*a33+b14*a43;dest[3]=b11*a14+b12*a24+b13*a34+b14*a44;dest[4]=b21*a11+b22*a21+b23*a31+b24*a41;dest[5]=b21*a12+b22*a22+b23*a32+b24*a42;dest[6]=b21*a13+b22*a23+b23*a33+b24*a43;dest[7]=b21*a14+b22*a24+b23*a34+b24*a44;dest[8]=b31*a11+b32*a21+b33*a31+b34*a41;dest[9]=b31*a12+b32*a22+b33*a32+b34*a42;dest[10]=b31*a13+b32*a23+b33*a33+b34*a43;dest[11]=b31*a14+b32*a24+b33*a34+b34*a44;dest[12]=b41*a11+b42*a21+b43*a31+b44*a41;dest[13]=b41*a12+b42*a22+b43*a32+b44*a42;dest[14]=b41*a13+b42*a23+b43*a33+b44*a43;dest[15]=b41*a14+b42*a24+b43*a34+b44*a44;return dest},mulMat4:function mulMat4(a,b){var m=Mat4.clone(a);return Mat4.mulMat42(m,a,b)},$mulMat4:function $mulMat4(a,b){return Mat4.mulMat42(a,a,b)},add:function add(dest,m){var copy=Mat4.clone(dest);return Mat4.$add(copy,m)},$add:function $add(dest,m){dest[0]+=m[0];dest[1]+=m[1];dest[2]+=m[2];dest[3]+=m[3];dest[4]+=m[4];dest[5]+=m[5];dest[6]+=m[6];dest[7]+=m[7];dest[8]+=m[8];dest[9]+=m[9];dest[10]+=m[10];dest[11]+=m[11];dest[12]+=m[12];dest[13]+=m[13];dest[14]+=m[14];dest[15]+=m[15];return dest},transpose:function transpose(dest){var m=Mat4.clone(dest);return Mat4.$transpose(m)},$transpose:function $transpose(dest){var n4=dest[4],n8=dest[8],n12=dest[12],n1=dest[1],n9=dest[9],n13=dest[13],n2=dest[2],n6=dest[6],n14=dest[14],n3=dest[3],n7=dest[7],n11=dest[11];dest[1]=n4;dest[2]=n8;dest[3]=n12;dest[4]=n1;dest[6]=n9;dest[7]=n13;dest[8]=n2;dest[9]=n6;dest[11]=n14;dest[12]=n3;dest[13]=n7;dest[14]=n11;return dest},rotateAxis:function rotateAxis(dest,theta,vec){var m=Mat4.clone(dest);return Mat4.$rotateAxis(m,theta,vec)},$rotateAxis:function $rotateAxis(dest,theta,vec){var s=sin(theta),c=cos(theta),nc=1-c,vx=vec[0],vy=vec[1],vz=vec[2],m11=vx*vx*nc+c,m12=vx*vy*nc+vz*s,m13=vx*vz*nc-vy*s,m21=vy*vx*nc-vz*s,m22=vy*vy*nc+c,m23=vy*vz*nc+vx*s,m31=vx*vz*nc+vy*s,m32=vy*vz*nc-vx*s,m33=vz*vz*nc+c,d11=dest[0],d12=dest[1],d13=dest[2],d14=dest[3],d21=dest[4],d22=dest[5],d23=dest[6],d24=dest[7],d31=dest[8],d32=dest[9],d33=dest[10],d34=dest[11],d41=dest[12],d42=dest[13],d43=dest[14],d44=dest[15];dest[0]=d11*m11+d21*m12+d31*m13;dest[1]=d12*m11+d22*m12+d32*m13;dest[2]=d13*m11+d23*m12+d33*m13;dest[3]=d14*m11+d24*m12+d34*m13;dest[4]=d11*m21+d21*m22+d31*m23;dest[5]=d12*m21+d22*m22+d32*m23;dest[6]=d13*m21+d23*m22+d33*m23;dest[7]=d14*m21+d24*m22+d34*m23;dest[8]=d11*m31+d21*m32+d31*m33;dest[9]=d12*m31+d22*m32+d32*m33;dest[10]=d13*m31+d23*m32+d33*m33;dest[11]=d14*m31+d24*m32+d34*m33;return dest},rotateXYZ:function rotateXYZ(dest,rx,ry,rz){var ans=Mat4.clone(dest);return Mat4.$rotateXYZ(ans,rx,ry,rz)},$rotateXYZ:function $rotateXYZ(dest,rx,ry,rz){var d11=dest[0],d12=dest[1],d13=dest[2],d14=dest[3],d21=dest[4],d22=dest[5],d23=dest[6],d24=dest[7],d31=dest[8],d32=dest[9],d33=dest[10],d34=dest[11],crx=cos(rx),cry=cos(ry),crz=cos(rz),srx=sin(rx),sry=sin(ry),srz=sin(rz),m11=cry*crz,m21=-crx*srz+srx*sry*crz,m31=srx*srz+crx*sry*crz,m12=cry*srz,m22=crx*crz+srx*sry*srz,m32=-srx*crz+crx*sry*srz,m13=-sry,m23=srx*cry,m33=crx*cry;dest[0]=d11*m11+d21*m12+d31*m13;dest[1]=d12*m11+d22*m12+d32*m13;dest[2]=d13*m11+d23*m12+d33*m13;dest[3]=d14*m11+d24*m12+d34*m13;dest[4]=d11*m21+d21*m22+d31*m23;dest[5]=d12*m21+d22*m22+d32*m23;dest[6]=d13*m21+d23*m22+d33*m23;dest[7]=d14*m21+d24*m22+d34*m23;dest[8]=d11*m31+d21*m32+d31*m33;dest[9]=d12*m31+d22*m32+d32*m33;dest[10]=d13*m31+d23*m32+d33*m33;dest[11]=d14*m31+d24*m32+d34*m33;return dest},translate:function translate(dest,x,y,z){var m=Mat4.clone(dest);return Mat4.$translate(m,x,y,z)},$translate:function $translate(dest,x,y,z){dest[12]=dest[0]*x+dest[4]*y+dest[8]*z+dest[12];dest[13]=dest[1]*x+dest[5]*y+dest[9]*z+dest[13];dest[14]=dest[2]*x+dest[6]*y+dest[10]*z+dest[14];dest[15]=dest[3]*x+dest[7]*y+dest[11]*z+dest[15];return dest},scale:function scale(dest,x,y,z){var m=Mat4.clone(dest);return Mat4.$scale(m,x,y,z)},$scale:function $scale(dest,x,y,z){dest[0]*=x;dest[1]*=x;dest[2]*=x;dest[3]*=x;dest[4]*=y;dest[5]*=y;dest[6]*=y;dest[7]*=y;dest[8]*=z;dest[9]*=z;dest[10]*=z;dest[11]*=z;return dest},invert:function invert(dest){var m=Mat4.clone(dest);return Mat4.$invert(m)},$invert:function $invert(dest){var x0=dest[0],x1=dest[1],x2=dest[2],x3=dest[3],x4=dest[4],x5=dest[5],x6=dest[6],x7=dest[7],x8=dest[8],x9=dest[9],x10=dest[10],x11=dest[11],x12=dest[12],x13=dest[13],x14=dest[14],x15=dest[15];var a0=x0*x5-x1*x4,a1=x0*x6-x2*x4,a2=x0*x7-x3*x4,a3=x1*x6-x2*x5,a4=x1*x7-x3*x5,a5=x2*x7-x3*x6,b0=x8*x13-x9*x12,b1=x8*x14-x10*x12,b2=x8*x15-x11*x12,b3=x9*x14-x10*x13,b4=x9*x15-x11*x13,b5=x10*x15-x11*x14;var invdet=1/(a0*b5-a1*b4+a2*b3+a3*b2-a4*b1+a5*b0);dest[0]=(+x5*b5-x6*b4+x7*b3)*invdet;dest[1]=(-x1*b5+x2*b4-x3*b3)*invdet;dest[2]=(+x13*a5-x14*a4+x15*a3)*invdet;dest[3]=(-x9*a5+x10*a4-x11*a3)*invdet;dest[4]=(-x4*b5+x6*b2-x7*b1)*invdet;dest[5]=(+x0*b5-x2*b2+x3*b1)*invdet;dest[6]=(-x12*a5+x14*a2-x15*a1)*invdet;dest[7]=(+x8*a5-x10*a2+x11*a1)*invdet;dest[8]=(+x4*b4-x5*b2+x7*b0)*invdet;dest[9]=(-x0*b4+x1*b2-x3*b0)*invdet;dest[10]=(+x12*a4-x13*a2+x15*a0)*invdet;dest[11]=(-x8*a4+x9*a2-x11*a0)*invdet;dest[12]=(-x4*b3+x5*b1-x6*b0)*invdet;dest[13]=(+x0*b3-x1*b1+x2*b0)*invdet;dest[14]=(-x12*a3+x13*a1-x14*a0)*invdet;dest[15]=(+x8*a3-x9*a1+x10*a0)*invdet;return dest},lookAt:function lookAt(dest,eye,center,up){var z=Vec3.sub(eye,center);z.$unit();var x=Vec3.cross(up,z);x.$unit();var y=Vec3.cross(z,x);y.$unit();return Mat4.set(dest,x[0],x[1],x[2],-x.dot(eye),y[0],y[1],y[2],-y.dot(eye),z[0],z[1],z[2],-z.dot(eye),0,0,0,1)},frustum:function frustum(dest,left,right,bottom,top,near,far){var rl=right-left,tb=top-bottom,fn=far-near;dest[0]=near*2/rl;dest[1]=0;dest[2]=0;dest[3]=0;dest[4]=0;dest[5]=near*2/tb;dest[6]=0;dest[7]=0;dest[8]=(right+left)/rl;dest[9]=(top+bottom)/tb;dest[10]=-(far+near)/fn;dest[11]=-1;dest[12]=0;dest[13]=0;dest[14]=-(far*near*2)/fn;dest[15]=0;return dest},perspective:function perspective(dest,fov,aspect,near,far){var ymax=near*tan(fov*pi/360),ymin=-ymax,xmin=ymin*aspect,xmax=ymax*aspect;return Mat4.frustum(dest,xmin,xmax,ymin,ymax,near,far)},ortho:function ortho(dest,left,right,top,bottom,near,far){var te=this.elements,w=right-left,h=top-bottom,p=far-near,x=(right+left)/w,y=(top+bottom)/h,z=(far+near)/p;dest[0]=2/w;dest[4]=0;dest[8]=0;dest[12]=-x;dest[1]=0;dest[5]=2/h;dest[9]=0;dest[13]=-y;dest[2]=0;dest[6]=0;dest[10]=-2/p;dest[14]=-z;dest[3]=0;dest[7]=0;dest[11]=0;dest[15]=1;return dest},toFloat32Array:function toFloat32Array(dest){var ans=dest.typedContainer;if(!ans)return dest;ans[0]=dest[0];ans[1]=dest[1];ans[2]=dest[2];ans[3]=dest[3];ans[4]=dest[4];ans[5]=dest[5];ans[6]=dest[6];ans[7]=dest[7];ans[8]=dest[8];ans[9]=dest[9];ans[10]=dest[10];ans[11]=dest[11];ans[12]=dest[12];ans[13]=dest[13];ans[14]=dest[14];ans[15]=dest[15];return ans}};proto=Mat4.prototype;for(method in generics){Mat4[method]=generics[method];proto[method]=function(m){return function(){var args=slice.call(arguments);args.unshift(this);return Mat4[m].apply(Mat4,args)}}(method)}var Quat=function(_Array3){_inherits(Quat,_Array3);function Quat(x,y,z,w){_classCallCheck(this,Quat);_get(Object.getPrototypeOf(Quat.prototype),"constructor",this).call(this,4);this[0]=x||0;this[1]=y||0;this[2]=z||0;this[3]=w||0;this.typedContainer=new Float32Array(4)}_createClass(Quat,null,[{key:"create",value:function create(){return new Array(4)}},{key:"fromVec3",value:function fromVec3(v,r){return new Quat(v[0],v[1],v[2],r||0)}},{key:"fromMat4",value:function fromMat4(m){var u;var v;var w;if(m[0]>m[5]&&m[0]>m[10]){u=0;v=1;w=2}else if(m[5]>m[0]&&m[5]>m[10]){u=1;v=2;w=0}else{u=2;v=0;w=1}var r=sqrt(1+m[u*5]-m[v*5]-m[w*5]);var q=new Quat;q[u]=.5*r;q[v]=.5*(m["n"+v+""+u]+m["n"+u+""+v])/r;q[w]=.5*(m["n"+u+""+w]+m["n"+w+""+u])/r;q[3]=.5*(m["n"+v+""+w]-m["n"+w+""+v])/r;return q}},{key:"fromXRotation",value:function fromXRotation(angle){return new Quat(sin(angle/2),0,0,cos(angle/2))}},{key:"fromYRotation",value:function fromYRotation(angle){return new Quat(0,sin(angle/2),0,cos(angle/2))}},{key:"fromZRotation",value:function fromZRotation(angle){return new Quat(0,0,sin(angle/2),cos(angle/2))}},{key:"fromAxisRotation",value:function fromAxisRotation(vec,angle){var x=vec[0],y=vec[1],z=vec[2],d=1/sqrt(x*x+y*y+z*z),s=sin(angle/2),c=cos(angle/2);return new Quat(s*x*d,s*y*d,s*z*d,c)}}]);return Quat}(Array);exports.Quat=Quat;generics={setQuat:function setQuat(dest,q){dest[0]=q[0];dest[1]=q[1];dest[2]=q[2];dest[3]=q[3];return dest},set:function set(dest,x,y,z,w){dest[0]=x||0;dest[1]=y||0;dest[2]=z||0;dest[3]=w||0;return dest},clone:function clone(dest){if(dest instanceof Quat){return new Quat(dest[0],dest[1],dest[2],dest[3])}else{return Quat.setQuat(new typedArray(4),dest)}},neg:function neg(dest){return new Quat(-dest[0],-dest[1],-dest[2],-dest[3])},$neg:function $neg(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];dest[3]=-dest[3];return dest},add:function add(dest,q){return new Quat(dest[0]+q[0],dest[1]+q[1],dest[2]+q[2],dest[3]+q[3])},$add:function $add(dest,q){dest[0]+=q[0];dest[1]+=q[1];dest[2]+=q[2];dest[3]+=q[3];return dest},sub:function sub(dest,q){return new Quat(dest[0]-q[0],dest[1]-q[1],dest[2]-q[2],dest[3]-q[3])},$sub:function $sub(dest,q){dest[0]-=q[0];dest[1]-=q[1];dest[2]-=q[2];dest[3]-=q[3];return dest},scale:function scale(dest,s){return new Quat(dest[0]*s,dest[1]*s,dest[2]*s,dest[3]*s)},$scale:function $scale(dest,s){dest[0]*=s;dest[1]*=s;dest[2]*=s;dest[3]*=s;return dest},mulQuat:function mulQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];return new Quat(aW*bX+aX*bW+aY*bZ-aZ*bY,aW*bY+aY*bW+aZ*bX-aX*bZ,aW*bZ+aZ*bW+aX*bY-aY*bX,aW*bW-aX*bX-aY*bY-aZ*bZ)},$mulQuat:function $mulQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];dest[0]=aW*bX+aX*bW+aY*bZ-aZ*bY;dest[1]=aW*bY+aY*bW+aZ*bX-aX*bZ;dest[2]=aW*bZ+aZ*bW+aX*bY-aY*bX;dest[3]=aW*bW-aX*bX-aY*bY-aZ*bZ;return dest},divQuat:function divQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];var d=1/(bW*bW+bX*bX+bY*bY+bZ*bZ);return new Quat((aX*bW-aW*bX-aY*bZ+aZ*bY)*d,(aX*bZ-aW*bY+aY*bW-aZ*bX)*d,(aY*bX+aZ*bW-aW*bZ-aX*bY)*d,(aW*bW+aX*bX+aY*bY+aZ*bZ)*d)},$divQuat:function $divQuat(dest,q){var aX=dest[0],aY=dest[1],aZ=dest[2],aW=dest[3],bX=q[0],bY=q[1],bZ=q[2],bW=q[3];var d=1/(bW*bW+bX*bX+bY*bY+bZ*bZ);dest[0]=(aX*bW-aW*bX-aY*bZ+aZ*bY)*d;dest[1]=(aX*bZ-aW*bY+aY*bW-aZ*bX)*d;dest[2]=(aY*bX+aZ*bW-aW*bZ-aX*bY)*d;dest[3]=(aW*bW+aX*bX+aY*bY+aZ*bZ)*d;return dest},invert:function invert(dest){var q0=dest[0],q1=dest[1],q2=dest[2],q3=dest[3];var d=1/(q0*q0+q1*q1+q2*q2+q3*q3);return new Quat(-q0*d,-q1*d,-q2*d,q3*d)},$invert:function $invert(dest){var q0=dest[0],q1=dest[1],q2=dest[2],q3=dest[3];var d=1/(q0*q0+q1*q1+q2*q2+q3*q3);dest[0]=-q0*d;dest[1]=-q1*d;dest[2]=-q2*d;dest[3]=q3*d;return dest},norm:function norm(dest){var a=dest[0],b=dest[1],c=dest[2],d=dest[3];return sqrt(a*a+b*b+c*c+d*d)},normSq:function normSq(dest){var a=dest[0],b=dest[1],c=dest[2],d=dest[3];return a*a+b*b+c*c+d*d},unit:function unit(dest){return Quat.scale(dest,1/Quat.norm(dest))},$unit:function $unit(dest){return Quat.$scale(dest,1/Quat.norm(dest))},conjugate:function conjugate(dest){return new Quat(-dest[0],-dest[1],-dest[2],dest[3])},$conjugate:function $conjugate(dest){dest[0]=-dest[0];dest[1]=-dest[1];dest[2]=-dest[2];return dest}};proto=Quat.prototype={};for(method in generics){Quat[method]=generics[method];proto[method]=function(m){return function(){var args=slice.call(arguments);args.unshift(this);return Quat[m].apply(Quat,args)}}(method)}Vec3.fromQuat=function(q){return new Vec3(q[0],q[1],q[2])};Mat4.fromQuat=function(q){var a=q[3],b=q[0],c=q[1],d=q[2];return new Mat4(a*a+b*b-c*c-d*d,2*b*c-2*a*d,2*b*d+2*a*c,0,2*b*c+2*a*d,a*a-b*b+c*c-d*d,2*c*d-2*a*b,0,2*b*d-2*a*c,2*c*d+2*a*b,a*a-b*b-c*c+d*d,0,0,0,0,1)}},{}],205:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopExportWildcard(obj,defaults){var newObj=defaults({},obj);delete newObj["default"];return newObj}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}var _arrayImpl=require("./array-impl");_defaults(exports,_interopExportWildcard(_arrayImpl,_defaults))},{"./array-impl":204}],206:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _camera=require("./camera");var _scene=require("./scene");var _scene2=_interopRequireDefault(_scene);var _program=require("./program");var _program2=_interopRequireDefault(_program);var _objectsPlane=require("./objects/plane");var _objectsPlane2=_interopRequireDefault(_objectsPlane);var _utils=require("./utils");var length=.16568542494923805;var plane=new _objectsPlane2["default"]({type:"x,y",xlen:length,ylen:length,offset:0});var camera=new _camera.PerspectiveCamera({fov:45,aspect:1,near:.1,far:500,position:{x:0,y:0,z:.2}});var Img=function(){function Img(){_classCallCheck(this,Img)}_createClass(Img,null,[{key:"postProcess",value:function postProcess(opt){var program=app.program instanceof _program2["default"]?app.program:app.program[opt.program];var textures=opt.fromTexture?(0,_utils.splat)(opt.fromTexture):[],framebuffer=opt.toFrameBuffer,screen=!!opt.toScreen,width=opt.width||app.canvas.width,height=opt.height||app.canvas.height,x=opt.viewportX||0,y=opt.viewportY||0;camera.aspect=opt.aspectRatio?opt.aspectRatio:Math.max(height/width,width/height);camera.update();var scene=new _scene2["default"](app,program,camera);scene.program=program;plane.textures=textures;plane.program=program;if(!scene.models.length){scene.add(plane)}if(framebuffer){if(!(framebuffer in app.frameBufferMemo)){app.setFrameBuffer(framebuffer,{width:width,height:height,bindToTexture:{parameters:[{name:"TEXTURE_MAG_FILTER",value:"LINEAR"},{name:"TEXTURE_MIN_FILTER",value:"LINEAR",generateMipmap:false}]},bindToRenderBuffer:false})}program.use();app.setFrameBuffer(framebuffer,true);gl.viewport(x,y,width,height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);program.setUniforms(opt.uniforms||{});scene.renderToTexture(framebuffer);app.setFrameBuffer(framebuffer,false)}if(screen){program.use();gl.viewport(x,y,width,height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);program.setUniforms(opt.uniforms||{});scene.render()}return this}}]);return Img}();exports["default"]=Img;module.exports=exports["default"]},{"./camera":199,"./objects/plane":212,"./program":215,"./scene":216,"./utils":219}],207:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _truncatedCone=require("./truncated-cone");var _truncatedCone2=_interopRequireDefault(_truncatedCone);var Cone=function(_TruncatedCone){_inherits(Cone,_TruncatedCone);function Cone(){var config=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Cone);_get(Object.getPrototypeOf(Cone.prototype),"constructor",this).call(this,_extends({},config,{topRadius:0,topCap:Boolean(config.cap),bottomCap:Boolean(config.cap),bottomRadius:config.radius||3}))}return Cone}(_truncatedCone2["default"]);exports["default"]=Cone;module.exports=exports["default"]},{"./truncated-cone":214}],208:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _model=require("./model");var _model2=_interopRequireDefault(_model);var Cube=function(_Model){_inherits(Cube,_Model);function Cube(){var config=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Cube);
_get(Object.getPrototypeOf(Cube.prototype),"constructor",this).call(this,_extends({vertices:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],texCoords:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]},config))}return Cube}(_model2["default"]);exports["default"]=Cube;module.exports=exports["default"]},{"./model":211}],209:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _truncatedCone=require("./truncated-cone");var _truncatedCone2=_interopRequireDefault(_truncatedCone);var Cylinder=function(_TruncatedCone){_inherits(Cylinder,_TruncatedCone);function Cylinder(){var config=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Cylinder);_get(Object.getPrototypeOf(Cylinder.prototype),"constructor",this).call(this,_extends({},config,{bottomRadius:config.radius,topRadius:config.radius}))}return Cylinder}(_truncatedCone2["default"]);exports["default"]=Cylinder;module.exports=exports["default"]},{"./truncated-cone":214}],210:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _model=require("./model");var _model2=_interopRequireDefault(_model);var _math=require("../math");var IcoSphere=function(_Model){_inherits(IcoSphere,_Model);function IcoSphere(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,IcoSphere);var iterations=opt.iterations||0,vertices=[],indices=[],sqrt=Math.sqrt,acos=Math.acos,atan2=Math.atan2,pi=Math.PI,pi2=pi*2;opt.onAddVertex=opt.onAddVertex||function(){};var t=(1+sqrt(5))/2,square=sqrt(1+t*t);vertices.push(-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0);indices.push(3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1);var getMiddlePoint=function(){var pointMemo={};return function(i1,i2){i1*=3;i2*=3;var mini=i1<i2?i1:i2,maxi=i1>i2?i1:i2,key=mini+"|"+maxi;if(key in pointMemo){return pointMemo[key]}var x1=vertices[i1],y1=vertices[i1+1],z1=vertices[i1+2],x2=vertices[i2],y2=vertices[i2+1],z2=vertices[i2+2],xm=(x1+x2)/2,ym=(y1+y2)/2,zm=(z1+z2)/2,len=sqrt(xm*xm+ym*ym+zm*zm);xm/=len;ym/=len;zm/=len;vertices.push(xm,ym,zm);return pointMemo[key]=vertices.length/3-1}}();for(var i=0;i<iterations;i++){var indices2=[];for(var j=0,l=indices.length;j<l;j+=3){var a=getMiddlePoint(indices[j],indices[j+1]),b=getMiddlePoint(indices[j+1],indices[j+2]),c=getMiddlePoint(indices[j+2],indices[j]);indices2.push(c,indices[j],a,a,indices[j+1],b,b,indices[j+2],c,a,b,c)}indices=indices2}var l=indices.length,normals=new Array(l*3),texCoords=new Array(l*2);for(var i=l-3;i>=0;i-=3){var i1=indices[i],i2=indices[i+1],i3=indices[i+2],in1=i1*3,in2=i2*3,in3=i3*3,iu1=i1*2,iu2=i2*2,iu3=i3*2,x1=vertices[in1],y1=vertices[in1+1],z1=vertices[in1+2],theta1=acos(z1/sqrt(x1*x1+y1*y1+z1*z1)),phi1=atan2(y1,x1)+pi,v1=theta1/pi,u1=1-phi1/pi2,x2=vertices[in2],y2=vertices[in2+1],z2=vertices[in2+2],theta2=acos(z2/sqrt(x2*x2+y2*y2+z2*z2)),phi2=atan2(y2,x2)+pi,v2=theta2/pi,u2=1-phi2/pi2,x3=vertices[in3],y3=vertices[in3+1],z3=vertices[in3+2],theta3=acos(z3/sqrt(x3*x3+y3*y3+z3*z3)),phi3=atan2(y3,x3)+pi,v3=theta3/pi,u3=1-phi3/pi2,vec1=[x3-x2,y3-y2,z3-z2],vec2=[x1-x2,y1-y2,z1-z2],normal=_math.Vec3.cross(vec1,vec2).$unit(),newIndex;if((u1==0||u2==0||u3==0)&&(u1==0||u1>.5)&&(u2==0||u2>.5)&&(u3==0||u3>.5)){vertices.push(vertices[in1],vertices[in1+1],vertices[in1+2]);newIndex=vertices.length/3-1;indices.push(newIndex);texCoords[newIndex*2]=1;texCoords[newIndex*2+1]=v1;normals[newIndex*3]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z;vertices.push(vertices[in2],vertices[in2+1],vertices[in2+2]);newIndex=vertices.length/3-1;indices.push(newIndex);texCoords[newIndex*2]=1;texCoords[newIndex*2+1]=v2;normals[newIndex*3]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z;vertices.push(vertices[in3],vertices[in3+1],vertices[in3+2]);newIndex=vertices.length/3-1;indices.push(newIndex);texCoords[newIndex*2]=1;texCoords[newIndex*2+1]=v3;normals[newIndex*3]=normal.x;normals[newIndex*3+1]=normal.y;normals[newIndex*3+2]=normal.z}normals[in1]=normals[in2]=normals[in3]=normal.x;normals[in1+1]=normals[in2+1]=normals[in3+1]=normal.y;normals[in1+2]=normals[in2+2]=normals[in3+2]=normal.z;texCoords[iu1]=u1;texCoords[iu1+1]=v1;texCoords[iu2]=u2;texCoords[iu2+1]=v2;texCoords[iu3]=u3;texCoords[iu3+1]=v3}_get(Object.getPrototypeOf(IcoSphere.prototype),"constructor",this).call(this,_extends({vertices:vertices,indices:indices,normals:normals,texCoords:texCoords},opt))}return IcoSphere}(_model2["default"]);exports["default"]=IcoSphere;module.exports=exports["default"]},{"../math":205,"./model":211}],211:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _math=require("../math");var _scene=require("../scene");var _scene2=_interopRequireDefault(_scene);var _buffer=require("../buffer");var _buffer2=_interopRequireDefault(_buffer);var _utils=require("../utils");var slice=Array.prototype.slice;function normalizeColors(arr,len){if(arr&&arr.length<len){var a0=arr[0];var a1=arr[1];var a2=arr[2];var a3=arr[3];var ans=[a0,a1,a2,a3];var times=len/arr.length;var index=undefined;while(--times){index=times*4;ans[index+0]=a0;ans[index+1]=a1;ans[index+2]=a2;ans[index+3]=a3}return new Float32Array(ans)}return arr}var Model=function(){function Model(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Model);this.id=opt.id||(0,_utils.uid)();this.pickable=Boolean(opt.pickable);this.pick=opt.pick||function(){return false};this.vertices=opt.vertices;this.normals=opt.normals;this.textures=opt.textures&&(0,_utils.splat)(opt.textures);this.colors=opt.colors;this.indices=opt.indices;this.shininess=opt.shininess||0;this.reflection=opt.reflection||0;this.refraction=opt.refraction||0;if(opt.pickingColors){this.pickingColors=opt.pickingColors}if(opt.texCoords){this.texCoords=opt.texCoords}this.uniforms=opt.uniforms||{};this.attributes=opt.attributes||{};this.render=opt.render;this.drawType=opt.hasOwnProperty("drawType")?opt.drawType:"TRIANGLES";this.display="display"in opt?opt.display:true;this.onBeforeRender=opt.onBeforeRender||_utils.noop;this.onAfterRender=opt.onAfterRender||_utils.noop;if(opt.program){this.program=opt.program}this.position=new _math.Vec3;this.rotation=new _math.Vec3;this.scale=new _math.Vec3(1,1,1);this.matrix=new _math.Mat4;this.buffers={};if(opt.computeCentroids){this.computeCentroids()}if(opt.computeNormals){this.computeNormals()}}_createClass(Model,[{key:"update",value:function update(){var pos=this.position;var rot=this.rotation;var scale=this.scale;this.matrix.id();this.matrix.$translate(pos.x,pos.y,pos.z);this.matrix.$rotateXYZ(rot.x,rot.y,rot.z);this.matrix.$scale(scale.x,scale.y,scale.z)}},{key:"computeCentroids",value:function computeCentroids(){var faces=this.faces;var vertices=this.vertices;var centroids=[];faces.forEach(function(face){var centroid=[0,0,0];var acum=0;face.forEach(function(idx){var vertex=vertices[idx];centroid[0]+=vertex[0];centroid[1]+=vertex[1];centroid[2]+=vertex[2];acum++});centroid[0]/=acum;centroid[1]/=acum;centroid[2]/=acum;centroids.push(centroid)});this.centroids=centroids}},{key:"computeNormals",value:function computeNormals(){var faces=this.faces;var vertices=this.vertices;var normals=[];faces.forEach(function(face){var v1=vertices[face[0]];var v2=vertices[face[1]];var v3=vertices[face[2]];var dir1={x:v3[0]-v2[0],y:v3[1]-v2[1],z:v3[1]-v2[2]};var dir2={x:v1[0]-v2[0],y:v1[1]-v2[1],z:v1[2]-v2[2]};_math.Vec3.$cross(dir2,dir1);if(_math.Vec3.norm(dir2)>1e-6){_math.Vec3.unit(dir2)}normals.push([dir2.x,dir2.y,dir2.z])});this.normals=normals}},{key:"setUniforms",value:function setUniforms(program){program.setUniforms(this.uniforms)}},{key:"setAttributes",value:function setAttributes(program){for(var key in Object.keys(this.attributes)){program.setBuffer(this.attributes[key])}}},{key:"setVertices",value:function setVertices(program){if(!this.$vertices){return}if(!this.buffers.position){this.buffers.position=new _buffer2["default"](program.gl,{attribute:"position",data:this.$vertices,size:3})}else if(this.dynamic){this.buffers.position.update({data:this.$vertices})}program.setBuffer(this.buffers.position)}},{key:"setNormals",value:function setNormals(program){if(!this.$normals){return}if(!this.buffers.normal){this.buffers.normal=new _buffer2["default"](program.gl,{attribute:"normal",data:this.$normals,size:3})}else if(this.dynamic){this.buffers.normal.update({data:this.$normals})}program.setBuffer(this.buffers.normal)}},{key:"setIndices",value:function setIndices(program){if(!this.$indices){return}var gl=program.gl;if(!this.buffers.indices){this.buffers.indices=new _buffer2["default"](program.gl,{bufferType:gl.ELEMENT_ARRAY_BUFFER,drawType:gl.STATIC_DRAW,data:this.$indices,size:1})}else if(this.dynamic){this.buffers.indices.update({data:this.$indices})}program.setBuffer(this.buffers.indices)}},{key:"setPickingColors",value:function setPickingColors(program){if(!this.$pickingColors){return}if(!this.buffers.pickingColors){this.buffers.pickingColors=new _buffer2["default"](program.gl,{attribute:"pickingColor",data:this.$pickingColors,size:4})}else if(this.dynamic){this.buffers.pickingColors.update({data:this.$pickingColors})}program.setBuffer(this.buffers.pickingColors)}},{key:"setColors",value:function setColors(program){if(!this.$colors){return}if(!this.buffers.colors){this.buffers.colors=new _buffer2["default"](program.gl,{attribute:"color",data:this.$colors,size:4})}else if(this.dynamic){this.buffers.colors.update({data:this.$colors})}program.setBuffer(this.buffers.colors)}},{key:"setTexCoords",value:function setTexCoords(program){if(!this.$texCoords){return}var gl=program.gl;var multi=this.$texCoords.constructor.name==="Object";var i=undefined,txs=undefined,l=undefined,tex=undefined;if(!this.buffers.texCoords){if(multi){this.buffers.texCoords={};for(i=0,txs=this.textures,l=txs.length;i<l;i++){tex=txs[i];this.buffers.texCoords["texCoord"+(i+1)]=new _buffer2["default"](gl,{attribute:"texCoord"+(i+1),data:this.$texCoords[tex],size:2})}}else{this.buffers.texCoords=new _buffer2["default"](gl,{attribute:"texCoord1",data:this.$texCoords,size:2})}}else if(this.dynamic){if(multi){for(i=0,txs=this.textures,l=txs.length;i<l;i++){tex=txs[i];this.buffers.texCoords["texCoord"+(i+1)].update({data:this.$texCoords[tex]})}}else{this.buffers.texCoords.update({data:this.$texCoords})}}if(multi){for(i=0,txs=this.textures,l=txs.length;i<l;i++){tex=txs[i];program.setBuffer(this.buffers.texCoords["texCoord"+(i+1)])}}else{program.setBuffer(this.buffers.texCoords)}}},{key:"setTextures",value:function setTextures(program,force){var gl=program.gl;this.textures=this.textures?(0,_utils.splat)(this.textures):[];var tex2D=0;var texCube=0;var mtexs=_scene2["default"].MAX_TEXTURES;for(var i=0,texs=this.textures,l=texs.length;i<mtexs;i++){if(i<l){program.setUniform("hasTexture"+(i+1),true);program.setTexture(texs[i],tex2D);program.setUniform("sampler"+(tex2D+1),i);tex2D++}else{program.setUniform("hasTextureCube"+(i+1),false);program.setUniform("hasTexture"+(i+1),false);program.setUniform("sampler"+ ++tex2D,i);program.setUniform("samplerCube"+ ++texCube,i)}}}},{key:"setState",value:function setState(program){this.setUniforms(program);this.setAttributes(program);this.setVertices(program);this.setColors(program);this.setPickingColors(program);this.setNormals(program);this.setTextures(program);this.setTexCoords(program);this.setIndices(program)}},{key:"unsetState",value:function unsetState(program){var gl=program.gl;var attributes=program.attributes;gl.bindBuffer(gl.ARRAY_BUFFER,null);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null);for(var name in attributes){gl.disableVertexAttribArray(attributes[name])}}},{key:"hash",get:function get(){return this.id+" "+this.$pickingIndex}},{key:"vertices",set:function set(val){if(!val){delete this.$vertices;delete this.$verticesLength;return}var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$vertices=val}else if(this.$verticesLength===vlen){this.$vertices.set(val)}else{this.$vertices=new Float32Array(val)}this.$verticesLength=vlen},get:function get(){return this.$vertices}},{key:"normals",set:function set(val){if(!val){delete this.$normals;delete this.$normalsLength;return}var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$normals=val}else if(this.$normalsLength===vlen){this.$normals.set(val)}else{this.$normals=new Float32Array(val)}this.$normalsLength=vlen},get:function get(){return this.$normals}},{key:"colors",set:function set(val){if(!val){delete this.$colors;delete this.$colorsLength;return}var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$colors=val}else if(this.$colorsLength===vlen){this.$colors.set(val)}else{this.$colors=new Float32Array(val)}if(this.$vertices&&this.$verticesLength/3*4!==vlen){this.$colors=normalizeColors(slice.call(this.$colors),this.$verticesLength/3*4)}this.$colorsLength=this.$colors.length},get:function get(){return this.$colors}},{key:"pickingColors",set:function set(val){if(!val){delete this.$pickingColors;delete this.$pickingColorsLength;return}var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$pickingColors=val}else if(this.$pickingColorsLength===vlen){this.$pickingColors.set(val)}else{this.$pickingColors=new Float32Array(val)}if(this.$vertices&&this.$verticesLength/3*4!==vlen){this.$pickingColors=normalizeColors(slice.call(this.$pickingColors),this.$verticesLength/3*4)}this.$pickingColorsLength=this.$pickingColors.length},get:function get(){return this.$pickingColors}},{key:"texCoords",set:function set(val){if(!val){delete this.$texCoords;delete this.$texCoordsLength;return}if(val.constructor.name==="Object"){var ans={};for(var prop in val){var texCoordArray=val[prop];ans[prop]=texCoordArray.BYTES_PER_ELEMENT?texCoordArray:new Float32Array(texCoordArray)}this.$texCoords=ans}else{var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$texCoords=val}else if(this.$texCoordsLength===vlen){this.$texCoords.set(val)}else{this.$texCoords=new Float32Array(val)}this.$texCoordsLength=vlen}},get:function get(){return this.$texCoords}},{key:"indices",set:function set(val){if(!val){delete this.$indices;delete this.$indicesLength;return}var vlen=val.length;if(val.BYTES_PER_ELEMENT){this.$indices=val}else if(this.$indicesLength===vlen){this.$indices.set(val)}else{this.$indices=new Uint16Array(val)}this.$indicesLength=vlen},get:function get(){return this.$indices}}]);return Model}();exports["default"]=Model;module.exports=exports["default"]},{"../buffer":197,"../math":205,"../scene":216,"../utils":219}],212:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _model=require("./model");var _model2=_interopRequireDefault(_model);var Plane=function(_Model){_inherits(Plane,_Model);function Plane(){var config=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Plane);var type=config.type;var unpack=config.unpack;var coords=type.split(",");var c1len=config[coords[0]+"len"];var c2len=config[coords[1]+"len"];var subdivisions1=config["n"+coords[0]]||1;var subdivisions2=config["n"+coords[1]]||1;var offset=config.offset;var flipCull=!!config.flipCull;var numVertices=(subdivisions1+1)*(subdivisions2+1);var positions=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);var i2=0,i3=0;if(flipCull){c1len=-c1len}for(var z=0;z<=subdivisions2;z++){for(var x=0;x<=subdivisions1;x++){var u=x/subdivisions1,v=z/subdivisions2;if(flipCull){texCoords[i2+0]=1-u}else{texCoords[i2+0]=u}texCoords[i2+1]=v;i2+=2;switch(type){case"x,y":positions[i3+0]=c1len*u-c1len*.5;positions[i3+1]=c2len*v-c2len*.5;positions[i3+2]=offset;normals[i3+0]=0;normals[i3+1]=0;if(flipCull){normals[i3+2]=1}else{normals[i3+2]=-1}break;case"x,z":positions[i3+0]=c1len*u-c1len*.5;positions[i3+1]=offset;positions[i3+2]=c2len*v-c2len*.5;normals[i3+0]=0;if(flipCull){normals[i3+1]=1}else{normals[i3+1]=-1}normals[i3+2]=0;break;case"y,z":positions[i3+0]=offset;positions[i3+1]=c1len*u-c1len*.5;positions[i3+2]=c2len*v-c2len*.5;if(flipCull){normals[i3+0]=1}else{normals[i3+0]=-1}normals[i3+1]=0;normals[i3+2]=0;break}i3+=3}}var numVertsAcross=subdivisions1+1,indices=[],index;for(z=0;z<subdivisions2;z++){for(x=0;x<subdivisions1;x++){index=(z*subdivisions1+x)*6;indices[index+0]=(z+0)*numVertsAcross+x;indices[index+1]=(z+1)*numVertsAcross+x;indices[index+2]=(z+0)*numVertsAcross+x+1;indices[index+3]=(z+1)*numVertsAcross+x;indices[index+4]=(z+1)*numVertsAcross+x+1;indices[index+5]=(z+0)*numVertsAcross+x+1}}var positions2,normals2,texCoords2;if(config.unpack){positions2=new Float32Array(indices.length*3);normals2=new Float32Array(indices.length*3);texCoords2=new Float32Array(indices.length*2);for(x=0,l=indices.length;x<l;++x){index=indices[x];positions2[x*3]=positions[index*3];positions2[x*3+1]=positions[index*3+1];positions2[x*3+2]=positions[index*3+2];normals2[x*3]=normals[index*3];normals2[x*3+1]=normals[index*3+1];normals2[x*3+2]=normals[index*3+2];texCoords2[x*2]=texCoords[index*2];texCoords2[x*2+1]=texCoords[index*2+1]}config=_extends({vertices:positions2,normals:normals2,texCoords:texCoords2},config)}else{config=_extends({vertices:positions,normals:normals,texCoords:texCoords,indices:indices},config)}_get(Object.getPrototypeOf(Plane.prototype),"constructor",this).call(this,config)}return Plane}(_model2["default"]);exports["default"]=Plane;module.exports=exports["default"]},{"./model":211}],213:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _model=require("./model");var _model2=_interopRequireDefault(_model);var Sphere=function(_Model){_inherits(Sphere,_Model);function Sphere(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Sphere);var nlat=opt.nlat||10;var nlong=opt.nlong||10;var radius=opt.radius||1;var startLat=0;var endLat=Math.PI;var latRange=endLat-startLat;var startLong=0;var endLong=2*Math.PI;var longRange=endLong-startLong;var numVertices=(nlat+1)*(nlong+1);var vertices=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);var indices=new Uint16Array(nlat*nlong*6);if(typeof radius==="number"){var value=radius;radius=function(n1,n2,n3,u,v){return value}}for(var y=0;y<=nlat;y++){for(var x=0;x<=nlong;x++){var u=x/nlong;var v=y/nlat;var theta=longRange*u;var phi=latRange*v;var sinTheta=Math.sin(theta);var cosTheta=Math.cos(theta);var sinPhi=Math.sin(phi);var cosPhi=Math.cos(phi);var ux=cosTheta*sinPhi;var uy=cosPhi;var uz=sinTheta*sinPhi;var r=radius(ux,uy,uz,u,v);var index=x+y*(nlong+1);var i3=index*3;var i2=index*2;vertices[i3+0]=r*ux;vertices[i3+1]=r*uy;vertices[i3+2]=r*uz;normals[i3+0]=ux;normals[i3+1]=uy;normals[i3+2]=uz;texCoords[i2+0]=u;texCoords[i2+1]=v}}var numVertsAround=nlat+1;for(var x=0;x<nlat;x++){for(var y=0;y<nlong;y++){var index=(x*nlong+y)*6;indices[index+0]=y*numVertsAround+x;indices[index+1]=y*numVertsAround+x+1;indices[index+2]=(y+1)*numVertsAround+x;indices[index+3]=(y+1)*numVertsAround+x;indices[index+4]=y*numVertsAround+x+1;indices[index+5]=(y+1)*numVertsAround+x+1}}_get(Object.getPrototypeOf(Sphere.prototype),"constructor",this).call(this,_extends({vertices:vertices,indices:indices,normals:normals,texCoords:texCoords},opt))}return Sphere}(_model2["default"]);exports["default"]=Sphere;module.exports=exports["default"]},{"./model":211}],214:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _model=require("./model");var _model2=_interopRequireDefault(_model);var TruncatedCone=function(_Model){_inherits(TruncatedCone,_Model);function TruncatedCone(){var config=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,TruncatedCone);var bottomRadius=config.bottomRadius||0;var topRadius=config.topRadius||0;var height=config.height||1;var nradial=config.nradial||10;var nvertical=config.nvertical||10;var topCap=Boolean(config.topCap);var bottomCap=Boolean(config.bottomCap);var extra=(topCap?2:0)+(bottomCap?2:0);var numVertices=(nradial+1)*(nvertical+1+extra);var vertices=new Float32Array(numVertices*3);var normals=new Float32Array(numVertices*3);var texCoords=new Float32Array(numVertices*2);var indices=new Uint16Array(nradial*(nvertical+extra)*6);var vertsAroundEdge=nradial+1;var math=Math;var slant=math.atan2(bottomRadius-topRadius,height);var msin=math.sin;var mcos=math.cos;var mpi=math.PI;var cosSlant=mcos(slant);var sinSlant=msin(slant);var start=topCap?-2:0;var end=nvertical+(bottomCap?2:0);var i3=0;var i2=0;for(var i=start;i<=end;i++){var v=i/nvertical;var y=height*v;var ringRadius=undefined;if(i<0){y=0;v=1;ringRadius=bottomRadius}else if(i>nvertical){y=height;v=1;ringRadius=topRadius}else{ringRadius=bottomRadius+(topRadius-bottomRadius)*(i/nvertical)}if(i===-2||i===nvertical+2){ringRadius=0;v=0}y-=height/2;for(var j=0;j<vertsAroundEdge;j++){var sin=msin(j*mpi*2/nradial);var cos=mcos(j*mpi*2/nradial);vertices[i3+0]=sin*ringRadius;vertices[i3+1]=y;vertices[i3+2]=cos*ringRadius;normals[i3+0]=i<0||i>nvertical?0:sin*cosSlant;normals[i3+1]=i<0?-1:i>nvertical?1:sinSlant;normals[i3+2]=i<0||i>nvertical?0:cos*cosSlant;texCoords[i2+0]=j/nradial;texCoords[i2+1]=v;i2+=2;i3+=3}}for(var i=0;i<nvertical+extra;i++){for(var j=0;j<nradial;j++){var index=(i*nradial+j)*6;indices[index+0]=vertsAroundEdge*(i+0)+0+j;indices[index+1]=vertsAroundEdge*(i+0)+1+j;indices[index+2]=vertsAroundEdge*(i+1)+1+j;indices[index+3]=vertsAroundEdge*(i+0)+0+j;indices[index+4]=vertsAroundEdge*(i+1)+1+j;indices[index+5]=vertsAroundEdge*(i+1)+0+j}}_get(Object.getPrototypeOf(TruncatedCone.prototype),"constructor",this).call(this,_extends({vertices:vertices,normals:normals,texCoords:texCoords,indices:indices},config))}return TruncatedCone}(_model2["default"]);exports["default"]=TruncatedCone;module.exports=exports["default"]},{"./model":211}],215:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _shaders=require("./shaders");var _shaders2=_interopRequireDefault(_shaders);var _io=require("./io");var _utils=require("./utils");function createShader(gl,shaderSource,shaderType){var shader=gl.createShader(shaderType);if(shader===null){throw new Error("Error creating shader with type "+shaderType)}gl.shaderSource(shader,shaderSource);gl.compileShader(shader);var compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){var info=gl.getShaderInfoLog(shader);gl.deleteShader(shader);
throw new Error("Error while compiling the shader "+info)}return shader}function createProgram(gl,vertexShader,fragmentShader){var vs=createShader(gl,vertexShader,gl.VERTEX_SHADER);var fs=createShader(gl,fragmentShader,gl.FRAGMENT_SHADER);var glProgram=gl.createProgram();gl.attachShader(glProgram,vs);gl.attachShader(glProgram,fs);gl.linkProgram(glProgram);var linked=gl.getProgramParameter(glProgram,gl.LINK_STATUS);if(!linked){throw new Error("Error linking shader "+gl.getProgramInfoLog(glProgram))}return glProgram}function getUniformSetter(gl,glProgram,info,isArray){var name=info.name;var type=info.type;var loc=gl.getUniformLocation(glProgram,name);var matrix=false;var vector=true;var glFunction=undefined;var typedArray=undefined;if(info.size>1&&isArray){switch(type){case gl.FLOAT:glFunction=gl.uniform1fv;typedArray=Float32Array;vector=false;break;case gl.FLOAT_VEC3:glFunction=gl.uniform3fv;typedArray=Float32Array;vector=true;break;case gl.FLOAT_MAT4:glFunction=gl.uniformMatrix4fv;typedArray=float32Array;vector=true;break;case gl.INT:case gl.BOOL:case gl.SAMPLER_2D:case gl.SAMPLER_CUBE:glFunction=gl.uniform1iv;typedArray=Uint16Array;vector=false;break;default:throw new Error("Uniform: Unknown GLSL type "+type)}}if(vector){switch(type){case gl.FLOAT:glFunction=gl.uniform1f;break;case gl.FLOAT_VEC2:glFunction=gl.uniform2fv;typedArray=isArray?Float32Array:new Float32Array(2);break;case gl.FLOAT_VEC3:glFunction=gl.uniform3fv;typedArray=isArray?Float32Array:new Float32Array(3);break;case gl.FLOAT_VEC4:glFunction=gl.uniform4fv;typedArray=isArray?Float32Array:new Float32Array(4);break;case gl.INT:case gl.BOOL:case gl.SAMPLER_2D:case gl.SAMPLER_CUBE:glFunction=gl.uniform1i;break;case gl.INT_VEC2:case gl.BOOL_VEC2:glFunction=gl.uniform2iv;typedArray=isArray?Uint16Array:new Uint16Array(2);break;case gl.INT_VEC3:case gl.BOOL_VEC3:glFunction=gl.uniform3iv;typedArray=isArray?Uint16Array:new Uint16Array(3);break;case gl.INT_VEC4:case gl.BOOL_VEC4:glFunction=gl.uniform4iv;typedArray=isArray?Uint16Array:new Uint16Array(4);break;case gl.FLOAT_MAT2:matrix=true;glFunction=gl.uniformMatrix2fv;break;case gl.FLOAT_MAT3:matrix=true;glFunction=gl.uniformMatrix3fv;break;case gl.FLOAT_MAT4:matrix=true;glFunction=gl.uniformMatrix4fv;break;default:break}}glFunction=glFunction.bind(gl);if(isArray&&typedArray){return function(val){return glFunction(loc,new typedArray(val))}}else if(matrix){return function(val){return glFunction(loc,false,val.toFloat32Array())}}else if(typedArray){return function(val){typedArray.set(val.toFloat32Array?val.toFloat32Array():val);glFunction(loc,typedArray)}}else{return function(val){return glFunction(loc,val)}}throw new Error("Unknown type: "+type)}var Program=function(){function Program(gl,vertexShader,fragmentShader){_classCallCheck(this,Program);this.gl=gl;var glProgram=createProgram(gl,vertexShader,fragmentShader);if(!glProgram){throw new Error("Failed to create program")}var attributes={};var attributeEnabled={};var uniforms={};var info=undefined;var name=undefined;var index=undefined;var len=gl.getProgramParameter(glProgram,gl.ACTIVE_ATTRIBUTES);for(var i=0;i<len;i++){info=gl.getActiveAttrib(glProgram,i);name=info.name;index=gl.getAttribLocation(glProgram,info.name);attributes[name]=index}len=gl.getProgramParameter(glProgram,gl.ACTIVE_UNIFORMS);for(var i=0;i<len;i++){info=gl.getActiveUniform(glProgram,i);name=info.name;name=name[name.length-1]==="]"?name.substr(0,name.length-3):name;uniforms[name]=getUniformSetter(gl,glProgram,info,info.name!==name)}this.program=glProgram;this.attributes=attributes;this.attributeEnabled=attributeEnabled;this.uniforms=uniforms}_createClass(Program,[{key:"setUniform",value:function setUniform(name,value){if(name in this.uniforms){this.uniforms[name](value)}return this}},{key:"setUniforms",value:function setUniforms(forms){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(forms)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _name=_step.value;if(_name in this.uniforms){this.uniforms[_name](forms[_name])}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return this}},{key:"setBuffer",value:function setBuffer(buf){var gl=this.gl;var loc=this.attributes[buf.attribute];var isAttribute=loc!==undefined;if(isAttribute){gl.enableVertexAttribArray(loc)}gl.bindBuffer(buf.bufferType,buf.buffer);if(isAttribute){gl.vertexAttribPointer(loc,buf.size,buf.dataType,false,buf.stride,buf.offset)}if(buf.instanced){var ext=gl.getExtension("ANGLE_instanced_arrays");if(!ext){console.warn("ANGLE_instanced_arrays not supported!")}else{ext.vertexAttribDivisorANGLE(loc,buf.instanced===true?1:buf.instanced)}}return this}},{key:"setBuffers",value:function setBuffers(){var args=arguments;if(Array.isArray(args[0])){args=args[0]}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=args[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var buf=_step2.value;this.setBuffer(buf)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return this}},{key:"use",value:function use(){this.gl.useProgram(this.program);return this}},{key:"setTexture",value:function setTexture(texture,index){texture.bind(index);return this}}],[{key:"fromHTMLTemplates",value:function fromHTMLTemplates(gl,vs,fs){var vertexShader=document.getElementById(vs).innerHTML;var fragmentShader=document.getElementById(fs).innerHTML;return new Program(gl,vertexShader,fragmentShader)}},{key:"fromDefaultShaders",value:function fromDefaultShaders(gl){return new Program(gl,_shaders2["default"].Vertex["Default"],_shaders2["default"].Fragment["Default"])}},{key:"fromShaderURIs",value:function fromShaderURIs(gl,vs,fs,opts){var vertexShaderURI,fragmentShaderURI,responses;return regeneratorRuntime.async(function fromShaderURIs$(context$2$0){while(1)switch(context$2$0.prev=context$2$0.next){case 0:opts=(0,_utils.merge)({path:"/",noCache:false},opts);vertexShaderURI=opts.path+vs;fragmentShaderURI=opts.path+fs;context$2$0.next=5;return regeneratorRuntime.awrap(new _io.XHRGroup({urls:[vertexShaderURI,fragmentShaderURI],noCache:opts.noCache}).sendAsync());case 5:responses=context$2$0.sent;return context$2$0.abrupt("return",new Program(gl,responses[0],responses[1]));case 7:case"end":return context$2$0.stop()}},null,this)}},{key:"_getOptions",value:function _getOptions(){var base=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var opt=undefined;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(args.length===2){return _extends({},base,{vs:args[0],fs:args[1]})}else{return _extends({},base,args[0]||{})}}}]);return Program}();exports["default"]=Program;module.exports=exports["default"]},{"./io":203,"./shaders":217,"./utils":219}],216:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _math=require("./math");var _program=require("./program");var _program2=_interopRequireDefault(_program);var _assert=require("assert");var _assert2=_interopRequireDefault(_assert);var _utils=require("./utils");var _fbo=require("./fbo");var _fbo2=_interopRequireDefault(_fbo);function noop(){}var DEFAULT_SCENE_OPTS={lights:{enable:false,ambient:{r:.2,g:.2,b:.2},directional:{direction:{x:1,y:1,z:1},color:{r:0,g:0,b:0}}},effects:{fog:false},clearColor:true,clearDepth:true,backgroundColor:{r:0,g:0,b:0,a:1},backgroundDepth:1};var Scene=function(){function Scene(gl,program,camera){var opt=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];_classCallCheck(this,Scene);(0,_assert2["default"])(gl);(0,_assert2["default"])(camera);this.gl=gl;opt=(0,_utils.merge)(DEFAULT_SCENE_OPTS,opt);this.program=opt.program?program[opt.program]:program;this.camera=camera;this.models=[];this.config=opt}_createClass(Scene,[{key:"add",value:function add(){for(var i=0,models=this.models,l=arguments.length;i<l;i++){var model=arguments[i];model.id=model.id||(0,_utils.uid)();models.push(model);this.defineBuffers(model)}}},{key:"remove",value:function remove(model){var models=this.models;var indexOf=models.indexOf(model);if(indexOf>-1){models.splice(indexOf,1)}}},{key:"removeAll",value:function removeAll(){this.models=[]}},{key:"getProgram",value:function getProgram(obj){var program=this.program;if(!(program instanceof _program2["default"])&&obj&&obj.program){program=program[obj.program];program.use();return program}return program}},{key:"defineBuffers",value:function defineBuffers(obj){var program=this.getProgram(obj);var prevDynamic=obj.dynamic;obj.dynamic=true;obj.setState(program);obj.dynamic=prevDynamic;obj.unsetState(program)}},{key:"beforeRender",value:function beforeRender(program){this.setupLighting(program);this.setupEffects(program);if(this.camera){this.camera.setStatus(program)}}},{key:"setupLighting",value:function setupLighting(program){var _config$lights=this.config.lights;var enable=_config$lights.enable;var ambient=_config$lights.ambient;var _config$lights$directional=_config$lights.directional;var color=_config$lights$directional.color;var direction=_config$lights$directional.direction;var _config$lights$points=_config$lights.points;var points=_config$lights$points===undefined?[]:_config$lights$points;points=points instanceof Array?points:[points];program.setUniform("enableLights",enable);if(!enable){return}var dir=new _math.Vec3(direction.x,direction.y,direction.z).$unit().$scale(-1);program.setUniforms({ambientColor:[ambient.r,ambient.g,ambient.b],directionalColor:[color.r,color.g,color.b],lightingDirection:[dir.x,dir.y,dir.z]});var numberPoints=points.length;program.setUniform("numberPoints",numberPoints);var pointLocations=[];var pointColors=[];var enableSpecular=[];var pointSpecularColors=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=points[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var point=_step.value;var position=point.position;var _color=point.color;var diffuse=point.diffuse;var specular=point.specular;var pointColor=_color||diffuse;pointLocations.push(position.x,position.y,position.z);pointColors.push(pointColor.r,pointColor.g,pointColor.b);enableSpecular.push(Number(Boolean(specular)));if(specular){pointSpecularColors.push(specular.r,specular.g,specular.b)}else{pointSpecularColors.push(0,0,0)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}if(pointLocations.length){program.setUniforms({pointLocation:pointLocations,pointColor:pointColors});program.setUniforms({enableSpecular:enableSpecular,pointSpecularColor:pointSpecularColors})}}},{key:"setupEffects",value:function setupEffects(program){var fog=this.config.effects.fog;var _fog$color=fog.color;var color=_fog$color===undefined?{r:.5,g:.5,b:.5}:_fog$color;if(fog){program.setUniforms({hasFog:true,fogNear:fog.near,fogFar:fog.far,fogColor:[color.r,color.g,color.b]})}else{program.setUniform("hasFog",false)}}},{key:"clear",value:function clear(){var gl=this.gl;if(this.config.clearColor){var bg=this.config.backgroundColor;gl.clearColor(bg.r,bg.g,bg.b,bg.a)}if(this.config.clearDepth){gl.clearDepth(this.config.backgroundDepth)}if(this.config.clearColor&&this.config.clearDepth){gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)}else if(this.config.clearColor){gl.clear(gl.COLOR_BUFFER_BIT)}else if(this.config.clearDepth){gl.clear(gl.DEPTH_BUFFER_BIT)}}},{key:"render",value:function render(){var opt=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var camera=this.camera;var renderProgram=opt.renderProgram;var multiplePrograms=!renderProgram&&this.program.constructor.name==="Object";var options=_extends({onBeforeRender:noop,onAfterRender:noop},opt);this.clear();if(!multiplePrograms){this.beforeRender(renderProgram||this.program)}for(var i=0,models=this.models,l=models.length;i<l;++i){var elem=models[i];if(elem.display){var program=renderProgram||this.getProgram(elem);if(multiplePrograms){this.beforeRender(program)}elem.onBeforeRender(program,camera);options.onBeforeRender(elem,i);this.renderObject(elem,program);options.onAfterRender(elem,i);elem.onAfterRender(program,camera)}}}},{key:"renderObject",value:function renderObject(object,program){var gl=this.gl;var view=this.camera.view;var matrix=object.matrix;var worldMatrix=view.mulMat4(matrix);var worldInverse=worldMatrix.invert();var worldInverseTranspose=worldInverse.transpose();object.setState(program);program.setUniforms({objectMatrix:matrix,worldMatrix:worldMatrix,worldInverseMatrix:worldInverse,worldInverseTransposeMatrix:worldInverseTranspose});if(object.render){object.render(gl,program,this.camera)}else{var drawType=object.drawType!==undefined?gl.get(object.drawType):gl.TRIANGLES;if(object.$indicesLength){gl.drawElements(drawType,object.$indicesLength,gl.UNSIGNED_SHORT,0)}else{gl.drawArrays(drawType,0,object.$verticesLength/3)}}object.unsetState(program)}},{key:"pick",value:function pick(x,y){var opt=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var gl=this.gl;if(this.pickingFBO===undefined){this.pickingFBO=new _fbo2["default"](gl,{width:gl.canvas.width,height:gl.canvas.height})}if(this.pickingProgram===undefined){this.pickingProgram=opt.pickingProgram||_program2["default"].fromDefaultShaders(gl)}var pickingProgram=this.pickingProgram;pickingProgram.use();pickingProgram.setUniform("enablePicking",true);pickingProgram.setUniform("hasPickingColors",false);this.pickingFBO.bind();var hash={};gl.enable(gl.SCISSOR_TEST);gl.scissor(x,gl.canvas.height-y,1,1);var oldClearColor=this.clearColor;var oldBackgroundColor=this.backgroundColor;this.clearColor=true;this.backgroundColor={r:0,g:0,b:0,a:0};this.render({renderProgram:pickingProgram,onBeforeRender:function onBeforeRender(elem,i){i++;var r=i%256;var g=(i/256>>0)%256;var b=(i/(256*256)>>0)%256;hash[[r,g,b]]=elem;pickingProgram.setUniform("pickColor",[r/255,g/255,b/255])}});gl.disable(gl.SCISSOR_TEST);var pixel=new Uint8Array(4);gl.readPixels(x,gl.canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);gl.bindFramebuffer(gl.FRAMEBUFFER,null);this.clearColor=oldClearColor;this.backgroundColor=oldBackgroundColor;var r=pixel[0];var g=pixel[1];var b=pixel[2];return hash[[r,g,b]]}},{key:"pickCustom",value:function pickCustom(x,y){var opt=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var gl=this.gl;if(this.pickingFBO===undefined){this.pickingFBO=new _fbo2["default"](gl,{width:gl.canvas.width,height:gl.canvas.height})}if(this.pickingProgram===undefined){this.pickingProgram=opt.pickingProgram||_program2["default"].fromDefaultShaders(gl)}var pickingProgram=this.pickingProgram;pickingProgram.use();pickingProgram.setUniform("enablePicking",true);pickingProgram.setUniform("hasPickingColors",true);this.pickingFBO.bind();gl.enable(gl.SCISSOR_TEST);gl.scissor(x,gl.canvas.height-y,1,1);var oldClearColor=this.clearColor;var oldBackgroundColor=this.backgroundColor;this.clearColor=true;this.backgroundColor={r:255,g:0,b:0,a:255};this.render({renderProgram:pickingProgram});gl.disable(gl.SCISSOR_TEST);var pixel=new Uint8Array(4);gl.readPixels(x,gl.canvas.height-y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,pixel);gl.bindFramebuffer(gl.FRAMEBUFFER,null);this.clearColor=oldClearColor;this.backgroundColor=oldBackgroundColor;var r=pixel[0];var g=pixel[1];var b=pixel[2];var a=pixel[3];return[r,g,b,a]}}]);return Scene}();exports["default"]=Scene;Scene.MAX_TEXTURES=10;Scene.MAX_POINT_LIGHTS=4;Scene.PICKING_RES=4;module.exports=exports["default"]},{"./fbo":201,"./math":205,"./program":215,"./utils":219,assert:1}],217:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Shaders={Vertex:{},Fragment:{}};Shaders.Vertex.Default="\n#define LIGHT_MAX 4\n\n// object attributes\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec4 color;\nattribute vec4 pickingColor;\nattribute vec2 texCoord1;\n\n// camera and object matrices\nuniform mat4 viewMatrix;\nuniform mat4 viewInverseMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\n\n// objectMatrix * viewMatrix = worldMatrix\nuniform mat4 worldMatrix;\nuniform mat4 worldInverseMatrix;\nuniform mat4 worldInverseTransposeMatrix;\nuniform mat4 objectMatrix;\nuniform vec3 cameraPosition;\n\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n\n// varyings\nvarying vec3 vReflection;\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec4 vNormal;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(position, 1.0);\n  vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normal, 1.0);\n\n  // lighting code\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    float directionalLightWeighting =\n      max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize(\n          (viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n         pointWeight += max(\n          dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n       } else {\n         break;\n       }\n     }\n\n    lightWeighting = ambientColor +\n      (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  // refraction / reflection code\n  if (useReflection) {\n    vReflection =\n      (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.0))).xyz;\n  } else {\n    vReflection = vec3(1.0, 1.0, 1.0);\n  }\n\n  // pass results to varyings\n  vColor = color;\n  vPickingColor = pickingColor;\n  vTexCoord = texCoord1;\n  vNormal = transformedNormal;\n  gl_Position = projectionMatrix * worldMatrix * vec4(position, 1.0);\n}\n";Shaders.Fragment.Default="\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\nvarying vec3 vReflection;\nvarying vec4 vNormal;\n\n// texture configs\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\nuniform bool hasTextureCube1;\nuniform samplerCube samplerCube1;\n\n// picking configs\nuniform bool enablePicking;\nuniform bool hasPickingColors;\nuniform vec3 pickColor;\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n// fog configuration\nuniform bool hasFog;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main(){\n  // set color from texture\n  if (!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor =\n      vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb *\n      lightWeighting, 1.0);\n  }\n\n  // has cube texture then apply reflection\n  if (hasTextureCube1) {\n    vec3 nReflection = normalize(vReflection);\n    vec3 reflectionValue;\n    if (refraction > 0.0) {\n     reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n    } else {\n     reflectionValue = -reflect(nReflection, vNormal.xyz);\n    }\n\n    // TODO(nico): check whether this is right.\n    vec4 cubeColor = textureCube(samplerCube1,\n        vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n    gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  }\n\n  // set picking\n  if (enablePicking) {\n    if (hasPickingColors) {\n      gl_FragColor = vPickingColor;\n    } else {\n      gl_FragColor = vec4(pickColor, 1.0);\n    }\n  }\n\n  // handle fog\n  if (hasFog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor =\n      mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n   }\n }\n";exports["default"]=Shaders;module.exports=exports["default"]},{}],218:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x2=parent;_x3=property;_x4=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _utils=require("./utils");var Texture=function Texture(gl){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Texture);this.gl=gl;this.target=gl.TEXTURE_2D;opts=(0,_utils.merge)({flipY:true,alignment:1,magFilter:gl.NEAREST,minFilter:gl.NEAREST,wrapS:gl.CLAMP_TO_EDGE,wrapT:gl.CLAMP_TO_EDGE,format:gl.RGBA,type:gl.UNSIGNED_BYTE,generateMipmap:false},opts);this.flipY=opts.flipY;this.alignment=opts.alignment;this.magFilter=opts.magFilter;this.minFilter=opts.minFilter;this.wrapS=opts.wrapS;this.wrapT=opts.wrapT;this.format=opts.format;this.type=opts.type;this.generateMipmap=opts.generateMipmap;if(this.type===gl.FLOAT){this.floatExtension=gl.getExtension("OES_texture_float");if(!this.floatExtension){throw new Error("OES_texture_foat is not supported.")}}this.texture=gl.createTexture()};var Texture2D=function(_Texture){_inherits(Texture2D,_Texture);function Texture2D(gl,opts){_classCallCheck(this,Texture2D);_get(Object.getPrototypeOf(Texture2D.prototype),"constructor",this).call(this,gl,opts);opts.data=opts.data||null;this.update(opts)}_createClass(Texture2D,[{key:"bind",value:function bind(index){var gl=this.gl;if(index!==undefined){gl.activeTexture(gl.TEXTURE0+index)}gl.bindTexture(gl.TEXTURE_2D,this.texture);if(index===undefined){return gl.getParameter(gl.ACTIVE_TEXTURE)-gl.TEXTURE0}return index}},{key:"update",value:function update(opts){var gl=this.gl;this.width=opts.width;this.height=opts.height;this.border=opts.border||0;this.data=opts.data;this.bind();if(this.width||this.height){gl.texImage2D(gl.TEXTURE_2D,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data)}else{gl.texImage2D(gl.TEXTURE_2D,0,this.format,this.format,this.type,this.data)}gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,this.minFilter);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,this.magFilter);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,this.wrapS);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,this.wrapT);if(this.generateMipmap){gl.generateMipmap(gl.TEXTURE_2D)}gl.bindTexture(gl.TEXTURE_2D,null)}}]);return Texture2D}(Texture);exports.Texture2D=Texture2D;var TextureCube=function(_Texture2){_inherits(TextureCube,_Texture2);function TextureCube(gl,opts){_classCallCheck(this,TextureCube);_get(Object.getPrototypeOf(TextureCube.prototype),"constructor",this).call(this,gl,opts);opts.data=opts.data||null;this.update(opts)}_createClass(TextureCube,[{key:"bind",value:function bind(index){var gl=this.gl;if(index!==undefined){gl.activeTexture(gl.TEXTURE0+index)}gl.bindTexture(gl.TEXTURE_CUBE_MAP,this.texture);if(index===undefined){return gl.getParameter(gl.ACTIVE_TEXTURE)-gl.TEXTURE0}return index}},{key:"update",value:function update(opts){var gl=this.gl;this.width=opts.width;this.height=opts.height;this.border=opts.border||0;this.data=opts.data;this.bind();if(this.width||this.height){gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.pos.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.pos.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.pos.z);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.neg.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.neg.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,this.format,this.width,this.height,this.border,this.format,this.type,this.data.neg.z)}else{gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X,0,this.format,this.format,this.type,this.data.pos.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y,0,this.format,this.format,this.type,this.data.pos.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z,0,this.format,this.format,this.type,this.data.pos.z);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X,0,this.format,this.format,this.type,this.data.neg.x);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,this.format,this.format,this.type,this.data.neg.y);gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,this.format,this.format,this.type,this.data.neg.z)}gl.texParameteri(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_MIN_FILTER,this.minFilter);gl.texParameteri(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_MAG_FILTER,this.magFilter);gl.texParameteri(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_WRAP_S,this.wrapS);gl.texParameteri(gl.TEXTURE_CUBE_MAP,gl.TEXTURE_WRAP_T,this.wrapT);if(this.generateMipmap){gl.generateMipmap(gl.TEXTURE_CUBE_MAP)}gl.bindTexture(gl.TEXTURE_CUBE_MAP,null)}}]);return TextureCube}(Texture);exports.TextureCube=TextureCube},{"./utils":219}],219:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;exports.splat=splat;exports.noop=noop;exports.uid=uid;function merge(objects){var mix={};for(var i=0,l=arguments.length;i<l;i++){var object=arguments[i];if(object.constructor.name!="Object")continue;for(var key in object){var op=object[key],mp=mix[key];if(mp&&op.constructor.name=="Object"&&mp.constructor.name=="Object"){mix[key]=merge(mp,op)}else{mix[key]=detach(op)}}}return mix}function splat(a){return Array.isArray(a)&&a||[a]}function noop(){}var _uid=Date.now();function uid(){return _uid++}function detach(elem){var t=elem.constructor.name,ans;if(t=="Object"){ans={};for(var p in elem){ans[p]=detach(elem[p])}return ans}else if(t=="Array"){ans=[];for(var i=0,l=elem.length;i<l;i++){ans[i]=detach(elem[i])}return ans}else{return elem}}},{}],220:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createGLContext=createGLContext;exports.hasWebGL=hasWebGL;exports.hasExtension=hasExtension;function createGLContext(canvas,opt){var _arguments=arguments;var gl=null;canvas=typeof canvas==="string"?document.getElementById(canvas):canvas;var ctx=undefined;ctx=canvas.getContext("experimental-webgl",opt);if(!ctx){ctx=canvas.getContext("webgl",opt)}if(ctx&&opt&&opt.debug){gl={};for(var m in ctx){var f=ctx[m];if(typeof f==="function"){gl[m]=function(k,v){return function(){console.log(k,Array.prototype.join.call(_arguments),Array.prototype.slice.call(_arguments));try{var ans=v.apply(ctx,_arguments)}catch(e){throw new Error(k+" "+e)}var errorStack=[];var error=undefined;while((error=ctx.getError())!==ctx.NO_ERROR){errorStack.push(error)}if(errorStack.length){throw errorStack.join()}return ans}}(m,f)}else{gl[m]=f}}}else{gl=ctx}if(gl){gl.get=function(name){return typeof name=="string"?gl[name]:name}}return gl}function hasWebGL(){try{var canvas=document.createElement("canvas");return Boolean(window.WebGLRenderingContext&&(canvas.getContext("webgl")||canvas.getContext("experimental-webgl")))}catch(error){return false}}function hasExtension(name){if(!PhiloGL.hasWebGL()){return false}var canvas=document.createElement("canvas");var context=canvas.getContext("webgl")||canvas.getContext("experimental-webgl");return context.getExtension(name)}},{}]},{},[198]);
